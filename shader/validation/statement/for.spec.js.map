{"version":3,"file":"for.spec.js","names":["description","makeTestGroup","keysOf","ShaderValidationTest","kTestTypes","g","test","desc","params","u","combine","beforeAllSubcases","t","type","requires","selectDeviceOrSkipTestCase","fn","code","header","value","pass","expectCompileResult","kTests","break","wgsl","init_var","init_var_type","init_var_function","init_var_function_type","init_let","init_let_type","init_const","init_const_type","init_call","init_phony","init_increment","init_compound_assign","cond_true","cont_call","cont_phony","cont_increment","cont_compound_assign","init_cond","cond_cont","init_cond_cont","init_shadow","no_semicolon","one_semicolon","no_paren","empty","init_expr","cond_stmt","cont_expr","cont_var","cont_var_type","cont_var_function","cont_var_function_type","cont_let","cont_let_type"],"sources":["../../../../../src/webgpu/shader/validation/statement/for.spec.ts"],"sourcesContent":["/**\n* AUTO-GENERATED - DO NOT EDIT. Source: https://github.com/gpuweb/cts\n**/export const description = `Validation tests for 'for' statements'`;import { makeTestGroup } from '../../../../common/framework/test_group.js';\nimport { keysOf } from '../../../../common/util/data_tables.js';\nimport { ShaderValidationTest } from '../shader_validation_test.js';\n\nimport { kTestTypes } from './test_types.js';\n\nexport const g = makeTestGroup(ShaderValidationTest);\n\ng.test('condition_type').\ndesc(`Tests that a 'for' condition must be a bool type`).\nparams((u) => u.combine('type', keysOf(kTestTypes))).\nbeforeAllSubcases((t) => {\n  if (kTestTypes[t.params.type].requires === 'f16') {\n    t.selectDeviceOrSkipTestCase('shader-f16');\n  }\n}).\nfn((t) => {\n  const type = kTestTypes[t.params.type];\n  const code = `\n${type.requires ? `enable ${type.requires};` : ''}\n\n${type.header ?? ''}\n\nfn f() -> bool {\n  for (; ${type.value};) {\n    return true;\n  }\n  return false;\n}\n`;\n\n  const pass = t.params.type === 'bool';\n  t.expectCompileResult(pass, code);\n});\n\nconst kTests = {\n  break: { wgsl: `for (;;) { break; }`, pass: true },\n\n  init_var: { wgsl: `for (var i = 1;;) { break; }`, pass: true },\n  init_var_type: { wgsl: `for (var i : i32 = 1;;) { break; }`, pass: true },\n  init_var_function: { wgsl: `for (var<function> i = 1;;) { break; }`, pass: true },\n  init_var_function_type: { wgsl: `for (var<function> i : i32 = 1;;) { break; }`, pass: true },\n  init_let: { wgsl: `for (let i = 1;;) { break; }`, pass: true },\n  init_let_type: { wgsl: `for (let i : u32 = 1;;) { break; }`, pass: true },\n  init_const: { wgsl: `for (const i = 1;;) { break; }`, pass: true },\n  init_const_type: { wgsl: `for (const i : f32 = 1;;) { break; }`, pass: true },\n  init_call: { wgsl: `for (x();;) { break; }`, pass: true },\n  init_phony: { wgsl: `for (_ = v;;) { break; }`, pass: true },\n  init_increment: { wgsl: `for (v++;;) { break; }`, pass: true },\n  init_compound_assign: { wgsl: `for (v += 3;;) { break; }`, pass: true },\n\n  cond_true: { wgsl: `for (;true;) { break; }`, pass: true },\n\n  cont_call: { wgsl: `for (;;x()) { break; }`, pass: true },\n  cont_phony: { wgsl: `for (;;_ = v) { break; }`, pass: true },\n  cont_increment: { wgsl: `for (;;v++) { break; }`, pass: true },\n  cont_compound_assign: { wgsl: `for (;;v += 3) { break; }`, pass: true },\n\n  init_cond: { wgsl: `for (var i = 1; i < 5;) {}`, pass: true },\n  cond_cont: { wgsl: `for (;v < 5; v++) {}`, pass: true },\n  init_cond_cont: { wgsl: `for (var i = 0; i < 5; i++) {}`, pass: true },\n  init_shadow: { wgsl: `for (var f = 0; f < 5; f++) {}`, pass: true },\n\n  no_semicolon: { wgsl: `for () { break; }`, pass: false },\n  one_semicolon: { wgsl: `for (;) { break; }`, pass: false },\n  no_paren: { wgsl: `for ;; { break; }`, pass: false },\n  empty: { wgsl: `for (;;) {}`, pass: false }, // note: fails due to behavior-analysis\n  init_expr: { wgsl: `for (true;;) { break; }`, pass: false },\n  cond_stmt: { wgsl: `for (;var i = 0;) { break; }`, pass: false },\n  cont_expr: { wgsl: `for (;;true) { break; }`, pass: false },\n  cont_var: { wgsl: `for (;;var i = 1) { break; }`, pass: false },\n  cont_var_type: { wgsl: `for (;;var i : i32 = 1) { break; }`, pass: false },\n  cont_var_function: { wgsl: `for (;;var<function> i = 1) { break; }`, pass: false },\n  cont_var_function_type: { wgsl: `for (;;var<function> i : i32 = 1) { break; }`, pass: false },\n  cont_let: { wgsl: `for (;;let i = 1) { break; }`, pass: false },\n  cont_let_type: { wgsl: `for (;;let i : u32 = 1) { break; }`, pass: false }\n};\n\ng.test('parse').\ndesc(`Test that 'for' statements are parsed correctly.`).\nparams((u) => u.combine('test', keysOf(kTests))).\nfn((t) => {\n  const code = `\nfn f() {\n  var v = 1;\n  ${kTests[t.params.test].wgsl}\n}\n\nfn x() {}\n`;\n  t.expectCompileResult(kTests[t.params.test].pass, code);\n});"],"mappings":"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","ignoreList":[]}