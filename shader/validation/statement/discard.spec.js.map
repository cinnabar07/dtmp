{"version":3,"file":"discard.spec.js","names":["description","makeTestGroup","ShaderValidationTest","g","test","desc","params","u","combine","fn","t","pos","module","subvert","subfrag","subcomp","vertex","fragment","compute","place","code","pass","includes","expectCompileResult"],"sources":["../../../../../src/webgpu/shader/validation/statement/discard.spec.ts"],"sourcesContent":["/**\n* AUTO-GENERATED - DO NOT EDIT. Source: https://github.com/gpuweb/cts\n**/export const description = `Validation tests for discard`;import { makeTestGroup } from '../../../../common/framework/test_group.js';\nimport { ShaderValidationTest } from '../shader_validation_test.js';\n\nexport const g = makeTestGroup(ShaderValidationTest);\n\ng.test('placement').\ndesc('Test that discard usage is validated').\nparams((u) =>\nu.combine('place', ['compute', 'vertex', 'fragment', 'module', 'subfrag', 'subvert', 'subcomp'])\n).\nfn((t) => {\n  const pos = {\n    module: '',\n    subvert: '',\n    subfrag: '',\n    subcomp: '',\n    vertex: '',\n    fragment: '',\n    compute: ''\n  };\n\n  pos[t.params.place] = 'discard;';\n\n  const code = `\n${pos.module}\n\nfn subvert() {\n  ${pos.subvert}\n}\n\n@vertex\nfn vtx() -> @builtin(position) vec4f {\n  ${pos.vertex}\n  subvert();\n  return vec4f(1);\n}\n\nfn subfrag() {\n  ${pos.subfrag}\n}\n\n@fragment\nfn frag() -> @location(0) vec4f {\n  ${pos.fragment}\n  subfrag();\n  return vec4f(1);\n}\n\nfn subcomp() {\n  ${pos.subcomp}\n}\n\n@compute\n@workgroup_size(1)\nfn comp() {\n  ${pos.compute}\n  subcomp();\n}\n`;\n\n  const pass = ['fragment', 'subfrag'].includes(t.params.place);\n  t.expectCompileResult(pass, code);\n});"],"mappings":";;IAAA;AACA;AACA,GAAG,OAAO,MAAMA,WAAW,GAAG,8BAA8B,CAAC,SAASC,aAAa,QAAQ,4CAA4C,CACvI,SAASC,oBAAoB,QAAQ,8BAA8B;AAEnE,OAAO,MAAMC,CAAC,GAAGF,aAAa,CAACC,oBAAoB,CAAC;;AAEpDC,CAAC,CAACC,IAAI,CAAC,WAAW,CAAC;AACnBC,IAAI,CAAC,sCAAsC,CAAC;AAC5CC,MAAM,CAAC,CAACC,CAAC;AACTA,CAAC,CAACC,OAAO,CAAC,OAAO,EAAE,CAAC,SAAS,EAAE,QAAQ,EAAE,UAAU,EAAE,QAAQ,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC;AAC/F,CAAC;AACDC,EAAE,CAAC,CAACC,CAAC,KAAK;EACR,MAAMC,GAAG,GAAG;IACVC,MAAM,EAAE,EAAE;IACVC,OAAO,EAAE,EAAE;IACXC,OAAO,EAAE,EAAE;IACXC,OAAO,EAAE,EAAE;IACXC,MAAM,EAAE,EAAE;IACVC,QAAQ,EAAE,EAAE;IACZC,OAAO,EAAE;EACX,CAAC;;EAEDP,GAAG,CAACD,CAAC,CAACJ,MAAM,CAACa,KAAK,CAAC,GAAG,UAAU;;EAEhC,MAAMC,IAAI,GAAG;AACf,EAAET,GAAG,CAACC,MAAM;AACZ;AACA;AACA,IAAID,GAAG,CAACE,OAAO;AACf;AACA;AACA;AACA;AACA,IAAIF,GAAG,CAACK,MAAM;AACd;AACA;AACA;AACA;AACA;AACA,IAAIL,GAAG,CAACG,OAAO;AACf;AACA;AACA;AACA;AACA,IAAIH,GAAG,CAACM,QAAQ;AAChB;AACA;AACA;AACA;AACA;AACA,IAAIN,GAAG,CAACI,OAAO;AACf;AACA;AACA;AACA;AACA;AACA,IAAIJ,GAAG,CAACO,OAAO;AACf;AACA;AACA,CAAC;;EAEC,MAAMG,IAAI,GAAG,CAAC,UAAU,EAAE,SAAS,CAAC,CAACC,QAAQ,CAACZ,CAAC,CAACJ,MAAM,CAACa,KAAK,CAAC;EAC7DT,CAAC,CAACa,mBAAmB,CAACF,IAAI,EAAED,IAAI,CAAC;AACnC,CAAC,CAAC","ignoreList":[]}