{"version":3,"file":"if.spec.js","names":["description","makeTestGroup","keysOf","ShaderValidationTest","kTestTypes","g","test","desc","params","u","combine","beforeAllSubcases","t","type","requires","selectDeviceOrSkipTestCase","fn","code","header","value","pass","expectCompileResult","kTests","true","wgsl","paren_true","expr","paren_expr","true_else","paren_true_else","expr_else","paren_expr_else","true_else_if_true","paren_true_else_if_paren_true","true_else_if_paren_true","paren_true_else_if_true","expr_else_if_expr","paren_expr_else_if_paren_expr","expr_else_if_paren_expr","paren_expr_else_if_expr","if","block","semicolon","true_lbrace","true_rbrace","lparen_true","rparen_true","true_lparen","true_rparen","true_else_if_no_block","true_else_if","true_else_if_semicolon","true_else_if_true_lbrace","true_else_if_true_rbrace","true_else_if_lparen_true","true_else_if_rparen_true","true_else_if_true_lparen","true_else_if_true_rparen","else","else_if","true_elif","true_elsif","elif","elsif"],"sources":["../../../../../src/webgpu/shader/validation/statement/if.spec.ts"],"sourcesContent":["/**\n* AUTO-GENERATED - DO NOT EDIT. Source: https://github.com/gpuweb/cts\n**/export const description = `Validation tests for 'if' statements'`;import { makeTestGroup } from '../../../../common/framework/test_group.js';\nimport { keysOf } from '../../../../common/util/data_tables.js';\nimport { ShaderValidationTest } from '../shader_validation_test.js';\n\nimport { kTestTypes } from './test_types.js';\n\nexport const g = makeTestGroup(ShaderValidationTest);\n\ng.test('condition_type').\ndesc(`Tests that an 'if' condition must be a bool type`).\nparams((u) => u.combine('type', keysOf(kTestTypes))).\nbeforeAllSubcases((t) => {\n  if (kTestTypes[t.params.type].requires === 'f16') {\n    t.selectDeviceOrSkipTestCase('shader-f16');\n  }\n}).\nfn((t) => {\n  const type = kTestTypes[t.params.type];\n  const code = `\n${type.requires ? `enable ${type.requires};` : ''}\n\n${type.header ?? ''}\n\nfn f() -> bool {\n  if ${type.value} {\n    return true;\n  }\n  return false;\n}\n`;\n\n  const pass = t.params.type === 'bool';\n  t.expectCompileResult(pass, code);\n});\n\ng.test('else_condition_type').\ndesc(`Tests that an 'else if' condition must be a bool type`).\nparams((u) => u.combine('type', keysOf(kTestTypes))).\nbeforeAllSubcases((t) => {\n  if (kTestTypes[t.params.type].requires === 'f16') {\n    t.selectDeviceOrSkipTestCase('shader-f16');\n  }\n}).\nfn((t) => {\n  const type = kTestTypes[t.params.type];\n  const code = `\n${type.requires ? `enable ${type.requires};` : ''}\n\n${type.header ?? ''}\n\nfn f(c : bool) -> bool {\n  if (c) {\n    return true;\n  } else if (${type.value}) {\n    return true;\n  }\n  return false;\n}\n`;\n\n  const pass = t.params.type === 'bool';\n  t.expectCompileResult(pass, code);\n});\n\nconst kTests = {\n  true: { wgsl: `if true {}`, pass: true },\n  paren_true: { wgsl: `if (true) {}`, pass: true },\n  expr: { wgsl: `if expr {}`, pass: true },\n  paren_expr: { wgsl: `if (expr) {}`, pass: true },\n\n  true_else: { wgsl: `if true {} else {}`, pass: true },\n  paren_true_else: { wgsl: `if (true) {} else {}`, pass: true },\n  expr_else: { wgsl: `if expr {} else {}`, pass: true },\n  paren_expr_else: { wgsl: `if (expr) {} else {}`, pass: true },\n\n  true_else_if_true: { wgsl: `if true {} else if true {}`, pass: true },\n  paren_true_else_if_paren_true: { wgsl: `if (true) {} else if (true) {}`, pass: true },\n  true_else_if_paren_true: { wgsl: `if true {} else if (true) {}`, pass: true },\n  paren_true_else_if_true: { wgsl: `if (true) {} else if true {}`, pass: true },\n\n  expr_else_if_expr: { wgsl: `if expr {} else if expr {}`, pass: true },\n  paren_expr_else_if_paren_expr: { wgsl: `if (expr) {} else if (expr) {}`, pass: true },\n  expr_else_if_paren_expr: { wgsl: `if expr {} else if (expr) {}`, pass: true },\n  paren_expr_else_if_expr: { wgsl: `if (expr) {} else if expr {}`, pass: true },\n\n  if: { wgsl: `if`, pass: false },\n  block: { wgsl: `if{}`, pass: false },\n  semicolon: { wgsl: `if;`, pass: false },\n  true_lbrace: { wgsl: `if true {`, pass: false },\n  true_rbrace: { wgsl: `if true }`, pass: false },\n\n  lparen_true: { wgsl: `if (true {}`, pass: false },\n  rparen_true: { wgsl: `if )true {}`, pass: false },\n  true_lparen: { wgsl: `if true( {}`, pass: false },\n  true_rparen: { wgsl: `if true) {}`, pass: false },\n\n  true_else_if_no_block: { wgsl: `if true {} else if `, pass: false },\n  true_else_if: { wgsl: `if true {} else if {}`, pass: false },\n  true_else_if_semicolon: { wgsl: `if true {} else if ;`, pass: false },\n  true_else_if_true_lbrace: { wgsl: `if true {} else if true {`, pass: false },\n  true_else_if_true_rbrace: { wgsl: `if true {} else if true }`, pass: false },\n\n  true_else_if_lparen_true: { wgsl: `if true {} else if (true {}`, pass: false },\n  true_else_if_rparen_true: { wgsl: `if true {} else if )true {}`, pass: false },\n  true_else_if_true_lparen: { wgsl: `if true {} else if true( {}`, pass: false },\n  true_else_if_true_rparen: { wgsl: `if true {} else if true) {}`, pass: false },\n\n  else: { wgsl: `else { }`, pass: false },\n  else_if: { wgsl: `else if true { }`, pass: false },\n  true_elif: { wgsl: `if (true) { } elif (true) {}`, pass: false },\n  true_elsif: { wgsl: `if (true) { } elsif (true) {}`, pass: false },\n  elif: { wgsl: `elif (true) {}`, pass: false },\n  elsif: { wgsl: `elsif (true) {}`, pass: false }\n};\n\ng.test('parse').\ndesc(`Test that 'if' statements are parsed correctly.`).\nparams((u) => u.combine('test', keysOf(kTests))).\nfn((t) => {\n  const code = `\nfn f() {\n  let expr = true;\n  ${kTests[t.params.test].wgsl}\n}`;\n  t.expectCompileResult(kTests[t.params.test].pass, code);\n});"],"mappings":"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","ignoreList":[]}