{"version":3,"file":"readonly_and_readwrite_storage_textures.spec.js","names":["description","makeTestGroup","TexelFormats","ShaderValidationTest","g","kFeatureName","test","desc","paramsSubcasesOnly","u","combine","fn","t","type","format","access","params","skipIfTextureFormatNotUsableAsStorageTexture","source","requiresFeature","expectCompileResult","hasLanguageFeature"],"sources":["../../../../../src/webgpu/shader/validation/extension/readonly_and_readwrite_storage_textures.spec.ts"],"sourcesContent":["/**\n* AUTO-GENERATED - DO NOT EDIT. Source: https://github.com/gpuweb/cts\n**/export const description = `\nValidation tests for the readonly_and_readwrite_storage_textures language feature\n`;import { makeTestGroup } from '../../../../common/framework/test_group.js';\nimport { TexelFormats } from '../../types.js';\nimport { ShaderValidationTest } from '../shader_validation_test.js';\n\nexport const g = makeTestGroup(ShaderValidationTest);\n\nconst kFeatureName = 'readonly_and_readwrite_storage_textures';\n\ng.test('var_decl').\ndesc(\n  `Checks that the read and read_write access modes are only allowed with the language feature present`\n).\nparamsSubcasesOnly((u) =>\nu.\ncombine('type', [\n'texture_storage_1d',\n'texture_storage_2d',\n'texture_storage_2d_array',\n'texture_storage_3d']\n).\ncombine('format', TexelFormats).\ncombine('access', ['read', 'write', 'read_write'])\n).\nfn((t) => {\n  const { type, format, access } = t.params;\n  t.skipIfTextureFormatNotUsableAsStorageTexture(format.format);\n\n  const source = `@group(0) @binding(0) var t : ${type}<${format.format}, ${access}>;`;\n  const requiresFeature = access !== 'write';\n  t.expectCompileResult(t.hasLanguageFeature(kFeatureName) || !requiresFeature, source);\n});\n\ng.test('textureBarrier').\ndesc(\n  `Checks that the textureBarrier() builtin is only allowed with the language feature present`\n).\nfn((t) => {\n  t.expectCompileResult(\n    t.hasLanguageFeature(kFeatureName),\n    `\n        @workgroup_size(1) @compute fn main() {\n            textureBarrier();\n        }\n    `\n  );\n});"],"mappings":";;IAAA;AACA;AACA,GAAG,OAAO,MAAMA,WAAW,GAAG;AAC9B;AACA,CAAC,CAAC,SAASC,aAAa,QAAQ,4CAA4C,CAC5E,SAASC,YAAY,QAAQ,gBAAgB,CAC7C,SAASC,oBAAoB,QAAQ,8BAA8B;;AAEnE,OAAO,MAAMC,CAAC,GAAGH,aAAa,CAACE,oBAAoB,CAAC;;AAEpD,MAAME,YAAY,GAAG,yCAAyC;;AAE9DD,CAAC,CAACE,IAAI,CAAC,UAAU,CAAC;AAClBC,IAAI;EACF;AACF,CAAC;AACDC,kBAAkB,CAAC,CAACC,CAAC;AACrBA,CAAC;AACDC,OAAO,CAAC,MAAM,EAAE;AAChB,oBAAoB;AACpB,oBAAoB;AACpB,0BAA0B;AAC1B,oBAAoB;AACpB,CAAC;AACDA,OAAO,CAAC,QAAQ,EAAER,YAAY,CAAC;AAC/BQ,OAAO,CAAC,QAAQ,EAAE,CAAC,MAAM,EAAE,OAAO,EAAE,YAAY,CAAC;AACjD,CAAC;AACDC,EAAE,CAAC,CAACC,CAAC,KAAK;EACR,MAAM,EAAEC,IAAI,EAAEC,MAAM,EAAEC,MAAM,CAAC,CAAC,GAAGH,CAAC,CAACI,MAAM;EACzCJ,CAAC,CAACK,4CAA4C,CAACH,MAAM,CAACA,MAAM,CAAC;;EAE7D,MAAMI,MAAM,GAAG,iCAAiCL,IAAI,IAAIC,MAAM,CAACA,MAAM,KAAKC,MAAM,IAAI;EACpF,MAAMI,eAAe,GAAGJ,MAAM,KAAK,OAAO;EAC1CH,CAAC,CAACQ,mBAAmB,CAACR,CAAC,CAACS,kBAAkB,CAAChB,YAAY,CAAC,IAAI,CAACc,eAAe,EAAED,MAAM,CAAC;AACvF,CAAC,CAAC;;AAEFd,CAAC,CAACE,IAAI,CAAC,gBAAgB,CAAC;AACxBC,IAAI;EACF;AACF,CAAC;AACDI,EAAE,CAAC,CAACC,CAAC,KAAK;EACRA,CAAC,CAACQ,mBAAmB;IACnBR,CAAC,CAACS,kBAAkB,CAAChB,YAAY,CAAC;IAClC;AACJ;AACA;AACA;AACA;EACE,CAAC;AACH,CAAC,CAAC","ignoreList":[]}