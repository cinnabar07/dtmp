{"version":3,"file":"workgroup_size.spec.js","names":["description","makeTestGroup","keysOf","ShaderValidationTest","g","kWorkgroupSizeTests","x_only_float","src","pass","xy_only_float","xyz_float","x_only_float_literal","xy_only_float_literal","xyz_float_literal","empty","empty_x","empty_y","invalid_entry","x_only_abstract","xy_only_abstract","xyz_abstract","x_only_unsigned","xy_only_unsigned","xyz_unsigned","x_only_signed","xy_only_signed","xyz_signed","x_only_hex","xy_only_hex","xyz_hex","const_expr","override","override_no_default","trailing_comma_x","trailing_comma_y","trailing_comma_z","override_expr","mixed_abstract_signed","mixed_abstract_unsigned","mixed_signed_unsigned","zero_x","zero_y","zero_z","negative_x","negative_y","negative_z","max_values","missing_left_paren","missing_right_paren","misspelling","no_params","multi_line","comment","mix_ux","mix_uy","mix_uz","duplicate1","duplicate2","test","desc","params","u","combine","fn","t","code","attr","expectCompileResult","beforeAllSubcases","selectDeviceOrSkipTestCase","ext"],"sources":["../../../../../src/webgpu/shader/validation/shader_io/workgroup_size.spec.ts"],"sourcesContent":["/**\n* AUTO-GENERATED - DO NOT EDIT. Source: https://github.com/gpuweb/cts\n**/export const description = `Validation tests for workgroup_size`;import { makeTestGroup } from '../../../../common/framework/test_group.js';\nimport { keysOf } from '../../../../common/util/data_tables.js';\nimport { ShaderValidationTest } from '../shader_validation_test.js';\n\nexport const g = makeTestGroup(ShaderValidationTest);\n\nconst kWorkgroupSizeTests = {\n  x_only_float: {\n    src: `@workgroup_size(8f)`,\n    pass: false\n  },\n  xy_only_float: {\n    src: `@workgroup_size(8, 8f)`,\n    pass: false\n  },\n  xyz_float: {\n    src: `@workgroup_size(8, 8, 8f)`,\n    pass: false\n  },\n  x_only_float_literal: {\n    src: `@workgroup_size(8.0)`,\n    pass: false\n  },\n  xy_only_float_literal: {\n    src: `@workgroup_size(8, 8.0)`,\n    pass: false\n  },\n  xyz_float_literal: {\n    src: `@workgroup_size(8, 8, 8.0)`,\n    pass: false\n  },\n  empty: {\n    src: `@workgroup_size()`,\n    pass: false\n  },\n  empty_x: {\n    src: `@workgroup_size(, 8)`,\n    pass: false\n  },\n  empty_y: {\n    src: `@workgroup_size(8, , 8)`,\n    pass: false\n  },\n  invalid_entry: {\n    src: `@workgroup_size(let)`,\n    pass: false\n  },\n\n  x_only_abstract: {\n    src: `@workgroup_size(8)`,\n    pass: true\n  },\n  xy_only_abstract: {\n    src: `@workgroup_size(8, 8)`,\n    pass: true\n  },\n  xyz_abstract: {\n    src: `@workgroup_size(8, 8, 8)`,\n    pass: true\n  },\n  x_only_unsigned: {\n    src: `@workgroup_size(8u)`,\n    pass: true\n  },\n  xy_only_unsigned: {\n    src: `@workgroup_size(8u, 8u)`,\n    pass: true\n  },\n  xyz_unsigned: {\n    src: `@workgroup_size(8u, 8u, 8u)`,\n    pass: true\n  },\n  x_only_signed: {\n    src: `@workgroup_size(8i)`,\n    pass: true\n  },\n  xy_only_signed: {\n    src: `@workgroup_size(8i, 8i)`,\n    pass: true\n  },\n  xyz_signed: {\n    src: `@workgroup_size(8i, 8i, 8i)`,\n    pass: true\n  },\n  x_only_hex: {\n    src: `@workgroup_size(0x1)`,\n    pass: true\n  },\n  xy_only_hex: {\n    src: `@workgroup_size(0x1, 0x1)`,\n    pass: true\n  },\n  xyz_hex: {\n    src: `@workgroup_size(0x1, 0x1, 0x1)`,\n    pass: true\n  },\n\n  const_expr: {\n    src: `const a = 4;\n    const b = 5;\n    @workgroup_size(a, b, a + b)`,\n    pass: true\n  },\n\n  override: {\n    src: `@id(42) override block_width = 12u;\n@workgroup_size(block_width)`,\n    pass: true\n  },\n  override_no_default: {\n    src: `override block_width: i32;\n@workgroup_size(block_width)`,\n    pass: true\n  },\n\n  trailing_comma_x: {\n    src: `@workgroup_size(8, )`,\n    pass: true\n  },\n  trailing_comma_y: {\n    src: `@workgroup_size(8, 8,)`,\n    pass: true\n  },\n  trailing_comma_z: {\n    src: `@workgroup_size(8, 8, 8,)`,\n    pass: true\n  },\n\n  override_expr: {\n    src: `override a = 5;\n    override b = 6;\n    @workgroup_size(a, b, a + b)`,\n    pass: true\n  },\n\n  // Mixed abstract is ok\n  mixed_abstract_signed: {\n    src: `@workgroup_size(8, 8i)`,\n    pass: true\n  },\n  mixed_abstract_unsigned: {\n    src: `@workgroup_size(8u, 8)`,\n    pass: true\n  },\n  // Mixed signed and unsigned is not\n  mixed_signed_unsigned: {\n    src: `@workgroup_size(8i, 8i, 8u)`,\n    pass: false\n  },\n\n  zero_x: {\n    src: `@workgroup_size(0)`,\n    pass: false\n  },\n  zero_y: {\n    src: `@workgroup_size(8, 0)`,\n    pass: false\n  },\n  zero_z: {\n    src: `@workgroup_size(8, 8, 0)`,\n    pass: false\n  },\n  negative_x: {\n    src: `@workgroup_size(-8)`,\n    pass: false\n  },\n  negative_y: {\n    src: `@workgroup_size(8, -8)`,\n    pass: false\n  },\n  negative_z: {\n    src: `@workgroup_size(8, 8, -8)`,\n    pass: false\n  },\n\n  max_values: {\n    src: `@workgroup_size(256, 256, 64)`,\n    pass: true\n  },\n\n  missing_left_paren: {\n    src: `@workgroup_size 1, 2, 3)`,\n    pass: false\n  },\n  missing_right_paren: {\n    src: `@workgroup_size(1, 2, 3`,\n    pass: false\n  },\n  misspelling: {\n    src: `@aworkgroup_size(1)`,\n    pass: false\n  },\n  no_params: {\n    src: `@workgroup_size`,\n    pass: false\n  },\n  multi_line: {\n    src: '@\\nworkgroup_size(1)',\n    pass: true\n  },\n  comment: {\n    src: `@/* comment */workgroup_size(1)`,\n    pass: true\n  },\n\n  mix_ux: {\n    src: `@workgroup_size(1u, 1i, 1i)`,\n    pass: false\n  },\n  mix_uy: {\n    src: `@workgroup_size(1i, 1u, 1i)`,\n    pass: false\n  },\n  mix_uz: {\n    src: `@workgroup_size(1i, 1i, 1u)`,\n    pass: false\n  },\n\n  duplicate1: {\n    src: `@workgroup_size(1) @workgroup_size(1)`,\n    pass: false\n  },\n  duplicate2: {\n    src: `@workgroup_size(1)\n@workgroup_size(2, 2, 2)`,\n    pass: false\n  }\n};\ng.test('workgroup_size').\ndesc(`Test validation of workgroup_size`).\nparams((u) => u.combine('attr', keysOf(kWorkgroupSizeTests))).\nfn((t) => {\n  const code = `\n${kWorkgroupSizeTests[t.params.attr].src}\n@compute fn main() {}`;\n  t.expectCompileResult(kWorkgroupSizeTests[t.params.attr].pass, code);\n});\n\ng.test('workgroup_size_fragment_shader').\ndesc(`Test validation of workgroup_size on a fragment shader`).\nfn((t) => {\n  const code = `\n@workgroup_size(1)\n@fragment fn main(@builtin(position) pos: vec4<f32>) {}`;\n  t.expectCompileResult(false, code);\n});\n\ng.test('workgroup_size_vertex_shader').\ndesc(`Test validation of workgroup_size on a vertex shader`).\nfn((t) => {\n  const code = `\n@workgroup_size(1)\n@vertex fn main() -> @builtin(position) vec4<f32> {}`;\n  t.expectCompileResult(false, code);\n});\n\ng.test('workgroup_size_function').\ndesc(`Test validation of workgroup_size on user function`).\nfn((t) => {\n  const code = `\n@workgroup_size(1)\nfn my_func() {}`;\n  t.expectCompileResult(false, code);\n});\n\ng.test('workgroup_size_const').\ndesc(`Test validation of workgroup_size on a const`).\nfn((t) => {\n  const code = `\n@workgroup_size(1)\nconst a : i32 = 4;\n\nfn my_func() {}`;\n  t.expectCompileResult(false, code);\n});\n\ng.test('workgroup_size_var').\ndesc(`Test validation of workgroup_size on a var`).\nfn((t) => {\n  const code = `\n@workgroup_size(1)\n@group(1) @binding(1)\nvar<storage> a: i32;\n\nfn my_func() {\n  _ = a;\n}`;\n  t.expectCompileResult(false, code);\n});\n\ng.test('workgroup_size_fp16').\ndesc(`Test validation of workgroup_size with fp16`).\nparams((u) => u.combine('ext', ['', 'h'])).\nbeforeAllSubcases((t) => {\n  t.selectDeviceOrSkipTestCase('shader-f16');\n}).\nfn((t) => {\n  const code = `\n@workgroup_size(1${t.params.ext})\n@compute fn main() {}`;\n  t.expectCompileResult(t.params.ext === '', code);\n});"],"mappings":"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","ignoreList":[]}