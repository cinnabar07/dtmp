{"version":3,"file":"id.spec.js","names":["description","makeTestGroup","keysOf","ShaderValidationTest","g","kTests","zero","src","pass","one","hex","trailing_comma","i32","ui32","largest","newline","comment","const_expr","misspelling","empty","missing_left_paren","missing_right_paren","multi_value","overide_expr","f32_literal","f32","negative","too_large","no_params","duplicate","test","desc","params","u","combine","fn","t","code","attr","expectCompileResult","beforeAllSubcases","selectDeviceOrSkipTestCase","ext","id"],"sources":["../../../../../src/webgpu/shader/validation/shader_io/id.spec.ts"],"sourcesContent":["/**\n* AUTO-GENERATED - DO NOT EDIT. Source: https://github.com/gpuweb/cts\n**/export const description = `Validation tests for id`;import { makeTestGroup } from '../../../../common/framework/test_group.js';\nimport { keysOf } from '../../../../common/util/data_tables.js';\nimport { ShaderValidationTest } from '../shader_validation_test.js';\n\nexport const g = makeTestGroup(ShaderValidationTest);\n\nconst kTests = {\n  zero: {\n    src: `@id(0)`,\n    pass: true\n  },\n  one: {\n    src: `@id(1)`,\n    pass: true\n  },\n  hex: {\n    src: `@id(0x1)`,\n    pass: true\n  },\n  trailing_comma: {\n    src: `@id(1,)`,\n    pass: true\n  },\n  i32: {\n    src: `@id(1i)`,\n    pass: true\n  },\n  ui32: {\n    src: `@id(1u)`,\n    pass: true\n  },\n  largest: {\n    src: `@id(65535)`,\n    pass: true\n  },\n  newline: {\n    src: '@\\nid(1)',\n    pass: true\n  },\n  comment: {\n    src: `@/* comment */id(1)`,\n    pass: true\n  },\n  const_expr: {\n    src: `const z = 5;\n      const y = 2;\n      @id(z + y)`,\n    pass: true\n  },\n\n  misspelling: {\n    src: `@aid(1)`,\n    pass: false\n  },\n  empty: {\n    src: `@id()`,\n    pass: false\n  },\n  missing_left_paren: {\n    src: `@id 1)`,\n    pass: false\n  },\n  missing_right_paren: {\n    src: `@id(1`,\n    pass: false\n  },\n  multi_value: {\n    src: `@id(1, 2)`,\n    pass: false\n  },\n  overide_expr: {\n    src: `override z = 5;\n      override y = 2;\n      @id(z + y)`,\n    pass: false\n  },\n  f32_literal: {\n    src: `@id(1.0)`,\n    pass: false\n  },\n  f32: {\n    src: `@id(1f)`,\n    pass: false\n  },\n  negative: {\n    src: `@id(-1)`,\n    pass: false\n  },\n  too_large: {\n    src: `@id(65536)`,\n    pass: false\n  },\n  no_params: {\n    src: `@id`,\n    pass: false\n  },\n  duplicate: {\n    src: `@id(1) @id(1)`,\n    pass: false\n  }\n};\n\ng.test('id').\ndesc(`Test validation of id`).\nparams((u) => u.combine('attr', keysOf(kTests))).\nfn((t) => {\n  const code = `\n${kTests[t.params.attr].src}\noverride a = 4;\n\n@workgroup_size(1, 1, 1)\n@compute fn main() {}`;\n  t.expectCompileResult(kTests[t.params.attr].pass, code);\n});\n\ng.test('id_fp16').\ndesc(`Test validation of id with fp16`).\nparams((u) => u.combine('ext', ['', 'h'])).\nbeforeAllSubcases((t) => {\n  t.selectDeviceOrSkipTestCase('shader-f16');\n}).\nfn((t) => {\n  const code = `\n@id(1${t.params.ext})\noverride a = 4;\n\n@workgroup_size(1, 1, 1)\n@compute fn main() {}`;\n  t.expectCompileResult(t.params.ext === '', code);\n});\n\ng.test('id_struct_member').\ndesc(`Test validation of id with struct member`).\nparams((u) => u.combine('id', ['@id(1) override', '@id(1)', ''])).\nfn((t) => {\n  const code = `\nstruct S {\n  ${t.params.id} a: i32,\n}\n\n@workgroup_size(1, 1, 1)\n@compute fn main() {}`;\n  t.expectCompileResult(t.params.id === '', code);\n});\n\ng.test('id_non_override').\ndesc(`Test validation of id with non-override`).\nparams((u) => u.combine('type', ['var', 'const', 'override'])).\nfn((t) => {\n  const code = `\n@id(1) ${t.params['type']} a = 4;\n\n@workgroup_size(1, 1, 1)\n@compute fn main() {}`;\n  t.expectCompileResult(t.params['type'] === 'override', code);\n});\n\ng.test('id_in_function').\ndesc(`Test validation of id inside a function`).\nparams((u) => u.combine('id', ['@id(1)', ''])).\nfn((t) => {\n  const code = `\n@workgroup_size(1, 1, 1)\n@compute fn main() {\n  ${t.params['id']} var a = 4;\n}`;\n  t.expectCompileResult(t.params['id'] === '', code);\n});"],"mappings":"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","ignoreList":[]}