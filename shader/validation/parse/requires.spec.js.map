{"version":3,"file":"requires.spec.js","names":["description","makeTestGroup","keysOf","kKnownWGSLLanguageFeatures","ShaderValidationTest","g","kCases","valid","code","pass","decl_before","decl_after","enable_before","diagnostic_before","const_assert_before","const_assert_after","embedded_comment","parens","multi_line","multiple_requires_duplicate","multiple_requires_different","multiple_entries_duplicate","multiple_entries_different","unknown","test","desc","params","u","combine","beforeAllSubcases","t","case","selectDeviceOrSkipTestCase","fn","skipIfLanguageFeatureNotSupported","c","expectCompileResult","feature","hasLanguageFeature"],"sources":["../../../../../src/webgpu/shader/validation/parse/requires.spec.ts"],"sourcesContent":["/**\n* AUTO-GENERATED - DO NOT EDIT. Source: https://github.com/gpuweb/cts\n**/export const description = `Parser validation tests for requires`;import { makeTestGroup } from '../../../../common/framework/test_group.js';\nimport { keysOf } from '../../../../common/util/data_tables.js';\nimport { kKnownWGSLLanguageFeatures } from '../../../capability_info.js';\nimport { ShaderValidationTest } from '../shader_validation_test.js';\n\nexport const g = makeTestGroup(ShaderValidationTest);\n\nconst kCases = {\n  valid: { code: `requires readonly_and_readwrite_storage_textures;`, pass: true },\n  decl_before: {\n    code: `alias i = i32;\nrequires readonly_and_readwrite_storage_textures;`,\n    pass: false\n  },\n  decl_after: {\n    code: `requires readonly_and_readwrite_storage_textures;\nalias i = i32;`,\n    pass: true\n  },\n  enable_before: {\n    code: `enable f16;\nrequires readonly_and_readwrite_storage_textures;`,\n    pass: true\n  },\n  diagnostic_before: {\n    code: `diagnostic(info, derivative_uniformity);\nrequires readonly_and_readwrite_storage_textures;`,\n    pass: true\n  },\n  const_assert_before: {\n    code: `const_assert 1 == 1;\nrequires readonly_and_readwrite_storage_textures;`,\n    pass: false\n  },\n  const_assert_after: {\n    code: `requires readonly_and_readwrite_storage_textures;\nconst_assert 1 == 1;`,\n    pass: true\n  },\n  embedded_comment: {\n    code: `/* comment\n\n*/requires readonly_and_readwrite_storage_textures;`,\n    pass: true\n  },\n  parens: {\n    code: `requires(readonly_and_readwrite_storage_textures);`,\n    pass: false\n  },\n  multi_line: {\n    code: `requires\nreadonly_and_readwrite_storage_textures;`,\n    pass: true\n  },\n  multiple_requires_duplicate: {\n    code: `requires readonly_and_readwrite_storage_textures;\nrequires readonly_and_readwrite_storage_textures;`,\n    pass: true\n  },\n  multiple_requires_different: {\n    code: `requires readonly_and_readwrite_storage_textures;\nrequires packed_4x8_integer_dot_product;`,\n    pass: true\n  },\n  multiple_entries_duplicate: {\n    code: `requires readonly_and_readwrite_storage_textures, readonly_and_readwrite_storage_textures, readonly_and_readwrite_storage_textures;`,\n    pass: true\n  },\n  multiple_entries_different: {\n    code: `requires readonly_and_readwrite_storage_textures, packed_4x8_integer_dot_product;`,\n    pass: true\n  },\n  unknown: {\n    code: `requires unknown;`,\n    pass: false\n  }\n};\n\ng.test('requires').\ndesc(`Tests that requires are validated correctly.`).\nparams((u) => u.combine('case', keysOf(kCases))).\nbeforeAllSubcases((t) => {\n  if (t.params.case === 'enable_before') {\n    t.selectDeviceOrSkipTestCase('shader-f16');\n  }\n}).\nfn((t) => {\n  t.skipIfLanguageFeatureNotSupported('readonly_and_readwrite_storage_textures');\n  t.skipIfLanguageFeatureNotSupported('packed_4x8_integer_dot_product');\n\n  const c = kCases[t.params.case];\n  t.expectCompileResult(c.pass, c.code);\n});\n\ng.test('wgsl_matches_api').\ndesc(`Tests that language features are accepted iff the API reports support for them.`).\nparams((u) => u.combine('feature', kKnownWGSLLanguageFeatures)).\nfn((t) => {\n  const code = `requires ${t.params.feature};`;\n  t.expectCompileResult(t.hasLanguageFeature(t.params.feature), code);\n});"],"mappings":";;IAAA;AACA;AACA,GAAG,OAAO,MAAMA,WAAW,GAAG,sCAAsC,CAAC,SAASC,aAAa,QAAQ,4CAA4C,CAC/I,SAASC,MAAM,QAAQ,wCAAwC,CAC/D,SAASC,0BAA0B,QAAQ,6BAA6B;AACxE,SAASC,oBAAoB,QAAQ,8BAA8B;;AAEnE,OAAO,MAAMC,CAAC,GAAGJ,aAAa,CAACG,oBAAoB,CAAC;;AAEpD,MAAME,MAAM,GAAG;EACbC,KAAK,EAAE,EAAEC,IAAI,EAAE,mDAAmD,EAAEC,IAAI,EAAE,IAAI,CAAC,CAAC;EAChFC,WAAW,EAAE;IACXF,IAAI,EAAE;AACV,kDAAkD;IAC9CC,IAAI,EAAE;EACR,CAAC;EACDE,UAAU,EAAE;IACVH,IAAI,EAAE;AACV,eAAe;IACXC,IAAI,EAAE;EACR,CAAC;EACDG,aAAa,EAAE;IACbJ,IAAI,EAAE;AACV,kDAAkD;IAC9CC,IAAI,EAAE;EACR,CAAC;EACDI,iBAAiB,EAAE;IACjBL,IAAI,EAAE;AACV,kDAAkD;IAC9CC,IAAI,EAAE;EACR,CAAC;EACDK,mBAAmB,EAAE;IACnBN,IAAI,EAAE;AACV,kDAAkD;IAC9CC,IAAI,EAAE;EACR,CAAC;EACDM,kBAAkB,EAAE;IAClBP,IAAI,EAAE;AACV,qBAAqB;IACjBC,IAAI,EAAE;EACR,CAAC;EACDO,gBAAgB,EAAE;IAChBR,IAAI,EAAE;AACV;AACA,oDAAoD;IAChDC,IAAI,EAAE;EACR,CAAC;EACDQ,MAAM,EAAE;IACNT,IAAI,EAAE,oDAAoD;IAC1DC,IAAI,EAAE;EACR,CAAC;EACDS,UAAU,EAAE;IACVV,IAAI,EAAE;AACV,yCAAyC;IACrCC,IAAI,EAAE;EACR,CAAC;EACDU,2BAA2B,EAAE;IAC3BX,IAAI,EAAE;AACV,kDAAkD;IAC9CC,IAAI,EAAE;EACR,CAAC;EACDW,2BAA2B,EAAE;IAC3BZ,IAAI,EAAE;AACV,yCAAyC;IACrCC,IAAI,EAAE;EACR,CAAC;EACDY,0BAA0B,EAAE;IAC1Bb,IAAI,EAAE,qIAAqI;IAC3IC,IAAI,EAAE;EACR,CAAC;EACDa,0BAA0B,EAAE;IAC1Bd,IAAI,EAAE,mFAAmF;IACzFC,IAAI,EAAE;EACR,CAAC;EACDc,OAAO,EAAE;IACPf,IAAI,EAAE,mBAAmB;IACzBC,IAAI,EAAE;EACR;AACF,CAAC;;AAEDJ,CAAC,CAACmB,IAAI,CAAC,UAAU,CAAC;AAClBC,IAAI,CAAC,8CAA8C,CAAC;AACpDC,MAAM,CAAC,CAACC,CAAC,KAAKA,CAAC,CAACC,OAAO,CAAC,MAAM,EAAE1B,MAAM,CAACI,MAAM,CAAC,CAAC,CAAC;AAChDuB,iBAAiB,CAAC,CAACC,CAAC,KAAK;EACvB,IAAIA,CAAC,CAACJ,MAAM,CAACK,IAAI,KAAK,eAAe,EAAE;IACrCD,CAAC,CAACE,0BAA0B,CAAC,YAAY,CAAC;EAC5C;AACF,CAAC,CAAC;AACFC,EAAE,CAAC,CAACH,CAAC,KAAK;EACRA,CAAC,CAACI,iCAAiC,CAAC,yCAAyC,CAAC;EAC9EJ,CAAC,CAACI,iCAAiC,CAAC,gCAAgC,CAAC;;EAErE,MAAMC,CAAC,GAAG7B,MAAM,CAACwB,CAAC,CAACJ,MAAM,CAACK,IAAI,CAAC;EAC/BD,CAAC,CAACM,mBAAmB,CAACD,CAAC,CAAC1B,IAAI,EAAE0B,CAAC,CAAC3B,IAAI,CAAC;AACvC,CAAC,CAAC;;AAEFH,CAAC,CAACmB,IAAI,CAAC,kBAAkB,CAAC;AAC1BC,IAAI,CAAC,iFAAiF,CAAC;AACvFC,MAAM,CAAC,CAACC,CAAC,KAAKA,CAAC,CAACC,OAAO,CAAC,SAAS,EAAEzB,0BAA0B,CAAC,CAAC;AAC/D8B,EAAE,CAAC,CAACH,CAAC,KAAK;EACR,MAAMtB,IAAI,GAAG,YAAYsB,CAAC,CAACJ,MAAM,CAACW,OAAO,GAAG;EAC5CP,CAAC,CAACM,mBAAmB,CAACN,CAAC,CAACQ,kBAAkB,CAACR,CAAC,CAACJ,MAAM,CAACW,OAAO,CAAC,EAAE7B,IAAI,CAAC;AACrE,CAAC,CAAC","ignoreList":[]}