{"version":3,"file":"blankspace.spec.js","names":["description","makeTestGroup","ShaderValidationTest","g","test","desc","params","u","combine","beginSubcases","fn","t","code","placement","contains_null","expectCompileResult","blankspace","include_bom"],"sources":["../../../../../src/webgpu/shader/validation/parse/blankspace.spec.ts"],"sourcesContent":["/**\n* AUTO-GENERATED - DO NOT EDIT. Source: https://github.com/gpuweb/cts\n**/export const description = `Validation tests for blankspace handling`;import { makeTestGroup } from '../../../../common/framework/test_group.js';\nimport { ShaderValidationTest } from '../shader_validation_test.js';\n\nexport const g = makeTestGroup(ShaderValidationTest);\n\ng.test('null_characters').\ndesc(`Test that WGSL source containing a null character is rejected.`).\nparams((u) =>\nu.\ncombine('contains_null', [true, false]).\ncombine('placement', ['comment', 'delimiter', 'eol']).\nbeginSubcases()\n).\nfn((t) => {\n  let code = '';\n  if (t.params.placement === 'comment') {\n    code = `// Here is a ${t.params.contains_null ? '\\0' : 'Z'} character`;\n  } else if (t.params.placement === 'delimiter') {\n    code = `const${t.params.contains_null ? '\\0' : ' '}name : i32 = 0;`;\n  } else if (t.params.placement === 'eol') {\n    code = `const name : i32 = 0;${t.params.contains_null ? '\\0' : ''}`;\n  }\n  t.expectCompileResult(!t.params.contains_null, code);\n});\n\ng.test('blankspace').\ndesc(`Test that all blankspace characters act as delimiters.`).\nparams((u) =>\nu.\ncombine('blankspace', [\n['\\u0020', 'space'],\n['\\u0009', 'horizontal_tab'],\n['\\u000a', 'line_feed'],\n['\\u000b', 'vertical_tab'],\n['\\u000c', 'form_feed'],\n['\\u000d', 'carriage_return'],\n['\\u0085', 'next_line'],\n['\\u200e', 'left_to_right_mark'],\n['\\u200f', 'right_to_left_mark'],\n['\\u2028', 'line_separator'],\n['\\u2029', 'paragraph_separator']]\n).\nbeginSubcases()\n).\nfn((t) => {\n  const code = `const${t.params.blankspace[0]}ident : i32 = 0;`;\n  t.expectCompileResult(true, code);\n});\n\ng.test('bom').\ndesc(\n  `Tests that including a BOM causes a shader compile error.\n\nNote, per RFC 2632, for protocols which forbit the use of U+FEFF then the BOM is treated as a\n\"ZERO WIDTH NO-BREAK SPACE\". The \"ZERO WIDTH NO-BREAK SPACE\" is not a valid WGSL blankspace code\npoint, so the BOM ends up as a shader compilation error.\n    `\n).\nparams((u) => u.combine('include_bom', [true, false])).\nfn((t) => {\n  const code = `${t.params.include_bom ? '\\uFEFF' : ''}const name : i32 = 0;`;\n  t.expectCompileResult(!t.params.include_bom, code);\n});"],"mappings":"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","ignoreList":[]}