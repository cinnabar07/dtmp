{"version":3,"file":"call.spec.js","names":["description","makeTestGroup","GPUTest","runFlowControlTest","g","test","desc","params","u","combine","fn","t","f","entrypoint","expect_order","extra","value"],"sources":["../../../../../src/webgpu/shader/execution/flow_control/call.spec.ts"],"sourcesContent":["/**\n* AUTO-GENERATED - DO NOT EDIT. Source: https://github.com/gpuweb/cts\n**/export const description = `\nFlow control tests for function calls.\n`;import { makeTestGroup } from '../../../../common/framework/test_group.js';\nimport { GPUTest } from '../../../gpu_test.js';\n\nimport { runFlowControlTest } from './harness.js';\n\nexport const g = makeTestGroup(GPUTest);\n\ng.test('call_basic').\ndesc('Test that flow control enters a called function').\nparams((u) => u.combine('preventValueOptimizations', [true, false])).\nfn((t) => {\n  runFlowControlTest(t, (f) => ({\n    entrypoint: `\n  ${f.expect_order(0)}\n  f();\n  ${f.expect_order(2)}\n`,\n    extra: `\nfn f() {\n  ${f.expect_order(1)}\n}`\n  }));\n});\n\ng.test('call_nested').\ndesc('Test that flow control enters a nested function calls').\nparams((u) => u.combine('preventValueOptimizations', [true, false])).\nfn((t) => {\n  runFlowControlTest(t, (f) => ({\n    entrypoint: `\n  ${f.expect_order(0)}\n  a();\n  ${f.expect_order(6)}\n`,\n    extra: `\nfn a() {\n  ${f.expect_order(1)}\n  b();\n  ${f.expect_order(5)}\n}\nfn b() {\n  ${f.expect_order(2)}\n  c();\n  ${f.expect_order(4)}\n}\nfn c() {\n  ${f.expect_order(3)}\n}`\n  }));\n});\n\ng.test('call_repeated').\ndesc('Test that flow control enters a nested function calls').\nparams((u) => u.combine('preventValueOptimizations', [true, false])).\nfn((t) => {\n  runFlowControlTest(t, (f) => ({\n    entrypoint: `\n  ${f.expect_order(0)}\n  a();\n  ${f.expect_order(10)}\n`,\n    extra: `\nfn a() {\n  ${f.expect_order(1)}\n  b();\n  ${f.expect_order(5)}\n  b();\n  ${f.expect_order(9)}\n}\nfn b() {\n  ${f.expect_order(2, 6)}\n  c();\n  ${f.expect_order(4, 8)}\n}\nfn c() {\n  ${f.expect_order(3, 7)}\n}`\n  }));\n});\n\ng.test('arg_eval').\ndesc('Test that arguments are evaluated left to right').\nparams((u) => u.combine('preventValueOptimizations', [true, false])).\nfn((t) => {\n  runFlowControlTest(t, (f) => ({\n    entrypoint: `\n  ${f.expect_order(0)}\n  a(b(), c(), d());\n  ${f.expect_order(5)}\n`,\n    extra: `\nfn a(p1 : u32, p2 : u32, p3 : u32) {\n  ${f.expect_order(4)}\n}\nfn b() -> u32 {\n  ${f.expect_order(1)}\n  return 0;\n}\nfn c() -> u32 {\n  ${f.expect_order(2)}\n  return 0;\n}\nfn d() -> u32 {\n  ${f.expect_order(3)}\n  return 0;\n}`\n  }));\n});\n\ng.test('arg_eval_logical_and').\ndesc('Test that arguments are evaluated left to right').\nparams((u) => u.combine('preventValueOptimizations', [true, false])).\nfn((t) => {\n  runFlowControlTest(t, (f) => ({\n    entrypoint: `\n  ${f.expect_order(0)}\n  a(b(${f.value(1)}) && c());\n  a(b(${f.value(0)}) && c());\n  ${f.expect_order(6)}\n`,\n    extra: `\nfn a(p : bool) {\n  ${f.expect_order(3, 5)}\n}\nfn b(x : i32) -> bool {\n  ${f.expect_order(1, 4)}\n  return x == 1;\n}\nfn c() -> bool {\n  ${f.expect_order(2)}\n  return true;\n}`\n  }));\n});\n\ng.test('arg_eval_logical_or').\ndesc('Test that arguments are evaluated left to right').\nparams((u) => u.combine('preventValueOptimizations', [true, false])).\nfn((t) => {\n  runFlowControlTest(t, (f) => ({\n    entrypoint: `\n  ${f.expect_order(0)}\n  a(b(${f.value(1)}) || c());\n  a(b(${f.value(0)}) || c());\n  ${f.expect_order(6)}\n`,\n    extra: `\nfn a(p : bool) {\n  ${f.expect_order(3, 5)}\n}\nfn b(x : i32) -> bool {\n  ${f.expect_order(1, 4)}\n  return x == 0;\n}\nfn c() -> bool {\n  ${f.expect_order(2)}\n  return true;\n}`\n  }));\n});\n\ng.test('arg_eval_pointers').\ndesc('Test that arguments are evaluated left to right').\nparams((u) => u.combine('preventValueOptimizations', [true, false])).\nfn((t) => {\n  runFlowControlTest(t, (f) => ({\n    entrypoint: `\n  var x : i32 = ${f.value(0)};\n  ${f.expect_order(0)}\n  _ = c(&x);\n  a(b(&x), c(&x));\n  ${f.expect_order(5)}\n`,\n    extra: `\nfn a(p1 : i32, p2 : i32) {\n  ${f.expect_order(4)}\n}\nfn b(p : ptr<function, i32>) -> i32 {\n  (*p)++;\n  ${f.expect_order(2)}\n  return 0;\n}\nfn c(p : ptr<function, i32>) -> i32 {\n  if (*p == 1) {\n    ${f.expect_order(3)}\n  } else {\n    ${f.expect_order(1)}\n  }\n  return 0;\n}`\n  }));\n});"],"mappings":"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","ignoreList":[]}