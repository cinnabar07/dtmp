{"version":3,"file":"zero_value.spec.js","names":["description","makeTestGroup","GPUTest","Type","basicExpressionBuilder","run","g","test","specURL","desc","params","u","combine","beforeAllSubcases","t","type","selectDeviceOrSkipTestCase","fn","ops","inputSource","input","expected","create","vec","width","constEvaluationMode","mat","columns","rows","array","length","beginSubcases","expand","member_types","map","_","i","includes","memberType","member_index","builder","nested","ty","join"],"sources":["../../../../../../src/webgpu/shader/execution/expression/constructor/zero_value.spec.ts"],"sourcesContent":["/**\n* AUTO-GENERATED - DO NOT EDIT. Source: https://github.com/gpuweb/cts\n**/export const description = `\nExecution Tests for zero value constructors\n`;import { makeTestGroup } from '../../../../../common/framework/test_group.js';\nimport { GPUTest } from '../../../../gpu_test.js';\nimport { Type } from '../../../../util/conversion.js';\nimport { basicExpressionBuilder, run } from '../expression.js';\n\nexport const g = makeTestGroup(GPUTest);\n\ng.test('scalar').\nspecURL('https://www.w3.org/TR/WGSL/#zero-value-builtin-function').\ndesc(`Test that a zero value scalar constructor produces the expected zero value`).\nparams((u) => u.combine('type', ['bool', 'i32', 'u32', 'f32', 'f16'])).\nbeforeAllSubcases((t) => {\n  if (t.params.type === 'f16') {\n    t.selectDeviceOrSkipTestCase('shader-f16');\n  }\n}).\nfn(async (t) => {\n  const type = Type[t.params.type];\n  await run(\n    t,\n    basicExpressionBuilder((ops) => `${type}()`),\n    [],\n    type,\n    { inputSource: 'const' },\n    [{ input: [], expected: type.create(0) }]\n  );\n});\n\ng.test('vector').\nspecURL('https://www.w3.org/TR/WGSL/#zero-value-builtin-function').\ndesc(`Test that a zero value vector constructor produces the expected zero value`).\nparams((u) =>\nu.\ncombine('type', ['bool', 'i32', 'u32', 'f32', 'f16']).\ncombine('width', [2, 3, 4])\n).\nbeforeAllSubcases((t) => {\n  if (t.params.type === 'f16') {\n    t.selectDeviceOrSkipTestCase('shader-f16');\n  }\n}).\nfn(async (t) => {\n  const type = Type.vec(t.params.width, Type[t.params.type]);\n  await run(\n    t,\n    basicExpressionBuilder((ops) => `${type}()`),\n    [],\n    type,\n    { inputSource: 'const' },\n    [{ input: [], expected: type.create(0) }]\n  );\n});\n\ng.test('vector_prefix').\ndesc(`Test that a zero value vector constructor produces the expected zero value`).\nparams((u) =>\nu.combine('type', ['i32', 'u32', 'f32', 'f16']).combine('width', [2, 3, 4])\n).\nbeforeAllSubcases((t) => {\n  if (t.params.type === 'f16') {\n    t.selectDeviceOrSkipTestCase('shader-f16');\n  }\n}).\nfn(async (t) => {\n  const type = Type.vec(t.params.width, Type[t.params.type]);\n  await run(\n    t,\n    basicExpressionBuilder((ops) => `vec${t.params.width}()`),\n    [],\n    type,\n    { inputSource: 'const', constEvaluationMode: 'direct' },\n    [{ input: [], expected: type.create(0) }]\n  );\n});\n\ng.test('matrix').\nspecURL('https://www.w3.org/TR/WGSL/#zero-value-builtin-function').\ndesc(`Test that a zero value matrix constructor produces the expected zero value`).\nparams((u) =>\nu.\ncombine('type', ['f32', 'f16']).\ncombine('columns', [2, 3, 4]).\ncombine('rows', [2, 3, 4])\n).\nbeforeAllSubcases((t) => {\n  if (t.params.type === 'f16') {\n    t.selectDeviceOrSkipTestCase('shader-f16');\n  }\n}).\nfn(async (t) => {\n  const type = Type.mat(t.params.columns, t.params.rows, Type[t.params.type]);\n  await run(\n    t,\n    basicExpressionBuilder((ops) => `${type}()`),\n    [],\n    type,\n    { inputSource: 'const' },\n    [{ input: [], expected: type.create(0) }]\n  );\n});\n\ng.test('array').\nspecURL('https://www.w3.org/TR/WGSL/#zero-value-builtin-function').\ndesc(`Test that a zero value matrix constructor produces the expected zero value`).\nparams((u) =>\nu.\ncombine('type', ['bool', 'i32', 'u32', 'f32', 'f16', 'vec3f', 'vec4i']).\ncombine('length', [1, 5, 10])\n).\nbeforeAllSubcases((t) => {\n  if (t.params.type === 'f16') {\n    t.selectDeviceOrSkipTestCase('shader-f16');\n  }\n}).\nfn(async (t) => {\n  const type = Type.array(t.params.length, Type[t.params.type]);\n  await run(\n    t,\n    basicExpressionBuilder((ops) => `${type}()`),\n    [],\n    type,\n    { inputSource: 'const' },\n    [{ input: [], expected: type.create(0) }]\n  );\n});\n\ng.test('structure').\nspecURL('https://www.w3.org/TR/WGSL/#zero-value-builtin-function').\ndesc(`Test that an structure constructed from element values produces the expected value`).\nparams((u) =>\nu.\ncombine('member_types', [\n['bool'],\n['u32'],\n['vec3f'],\n['i32', 'u32'],\n['i32', 'f16', 'vec4i', 'mat3x2f'],\n['bool', 'u32', 'f16', 'vec3f', 'vec2i'],\n['i32', 'u32', 'f32', 'f16', 'vec3f', 'vec4i']]\n).\ncombine('nested', [false, true]).\nbeginSubcases().\nexpand('member_index', (t) => t.member_types.map((_, i) => i))\n).\nbeforeAllSubcases((t) => {\n  if (t.params.member_types.includes('f16')) {\n    t.selectDeviceOrSkipTestCase('shader-f16');\n  }\n}).\nfn(async (t) => {\n  const memberType = Type[t.params.member_types[t.params.member_index]];\n  const builder = basicExpressionBuilder((_) =>\n  t.params.nested ?\n  `OuterStruct().inner.member_${t.params.member_index}` :\n  `MyStruct().member_${t.params.member_index}`\n  );\n  await run(\n    t,\n    (params) => {\n      return `\n${t.params.member_types.includes('f16') ? 'enable f16;' : ''}\n\n${builder(params)}\n\nstruct MyStruct {\n${t.params.member_types.map((ty, i) => `  member_${i} : ${ty},`).join('\\n')}\n};\nstruct OuterStruct {\n  pre : i32,\n  inner : MyStruct,\n  post : i32,\n};\n`;\n    },\n    [],\n    memberType,\n    { inputSource: 'const' },\n    [{ input: [], expected: memberType.create(0) }]\n  );\n});"],"mappings":"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","ignoreList":[]}