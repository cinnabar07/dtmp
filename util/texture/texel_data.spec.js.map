{"version":3,"file":"texel_data.spec.js","names":["description","makeTestGroup","assert","kEncodableTextureFormats","kTextureFormatInfo","GPUTest","gammaCompress","floatAsNormalizedIntegerUnquantized","kTexelRepresentationInfo","getSingleDataType","getComponentReadbackTraits","g","doTest","t","format","params","componentData","rep","texelData","pack","texture","createTextureTracked","size","usage","GPUTextureUsage","COPY_DST","TEXTURE_BINDING","device","queue","writeTexture","bytesPerRow","byteLength","ReadbackTypedArray","shaderType","shader","componentOrder","map","C","join","toLowerCase","pipeline","createComputePipeline","layout","compute","module","createShaderModule","code","entryPoint","outputBuffer","createBufferTracked","length","GPUBufferUsage","STORAGE","COPY_SRC","bindGroup","createBindGroup","getBindGroupLayout","entries","binding","resource","createView","buffer","encoder","globalThis","_TRAMPOLINE_","createCommandEncoder","pass","beginComputePass","setPipeline","setBindGroup","dispatchWorkgroups","end","submit","finish","idealReadbackData","c","value","decode","undefined","readBackValue","readGPUBufferRangeTyped","type","Float32Array","typedLength","expect","data","readBackValueToSRGB","Array","i","gammaCompressed","outputIndex","cleanup","check8UnormSRGB","inputValue","idealValue","kToleranceULP","Math","abs","R","G","B","expectGPUBufferValuesEqual","makeParam","fn","componentInfo","bitLength","A","test","u","combine","filter","info","color","copyDst","beginSubcases","expand","max","pow","floor","offset","beforeAllSubcases","skipIfTextureFormatNotSupported","range","desc"],"sources":["../../../../src/webgpu/util/texture/texel_data.spec.ts"],"sourcesContent":["/**\n* AUTO-GENERATED - DO NOT EDIT. Source: https://github.com/gpuweb/cts\n**/export const description = 'Test helpers for texel data produce the expected data in the shader';import { makeTestGroup } from '../../../common/framework/test_group.js';\nimport { assert } from '../../../common/util/util.js';\nimport {\n  kEncodableTextureFormats,\n  kTextureFormatInfo } from\n\n'../../format_info.js';\nimport { GPUTest } from '../../gpu_test.js';\nimport { gammaCompress, floatAsNormalizedIntegerUnquantized } from '../conversion.js';\n\nimport {\n  kTexelRepresentationInfo,\n  getSingleDataType,\n  getComponentReadbackTraits } from\n'./texel_data.js';\n\nexport const g = makeTestGroup(GPUTest);\n\nasync function doTest(\nt)\n\n\n\n\n\n\n\n\n\n\n{\n  const { format } = t.params;\n  const componentData = t.params.componentData;\n\n  const rep = kTexelRepresentationInfo[format];\n  const texelData = rep.pack(componentData);\n  const texture = t.createTextureTracked({\n    format,\n    size: [1, 1, 1],\n    usage: GPUTextureUsage.COPY_DST | GPUTextureUsage.TEXTURE_BINDING\n  });\n\n  t.device.queue.writeTexture(\n    { texture },\n    texelData,\n    {\n      bytesPerRow: texelData.byteLength\n    },\n    [1]\n  );\n\n  const { ReadbackTypedArray, shaderType } = getComponentReadbackTraits(getSingleDataType(format));\n\n  const shader = `\n  @group(0) @binding(0) var tex : texture_2d<${shaderType}>;\n\n  struct Output {\n    ${rep.componentOrder.map((C) => `result${C} : ${shaderType},`).join('\\n')}\n  };\n  @group(0) @binding(1) var<storage, read_write> output : Output;\n\n  @compute @workgroup_size(1)\n  fn main() {\n      var texel : vec4<${shaderType}> = textureLoad(tex, vec2<i32>(0, 0), 0);\n      ${rep.componentOrder.map((C) => `output.result${C} = texel.${C.toLowerCase()};`).join('\\n')}\n      return;\n  }`;\n\n  const pipeline = t.device.createComputePipeline({\n    layout: 'auto',\n    compute: {\n      module: t.device.createShaderModule({\n        code: shader\n      }),\n      entryPoint: 'main'\n    }\n  });\n\n  const outputBuffer = t.createBufferTracked({\n    size: rep.componentOrder.length * 4,\n    usage: GPUBufferUsage.STORAGE | GPUBufferUsage.COPY_SRC\n  });\n\n  const bindGroup = t.device.createBindGroup({\n    layout: pipeline.getBindGroupLayout(0),\n    entries: [\n    {\n      binding: 0,\n      resource: texture.createView()\n    },\n    {\n      binding: 1,\n      resource: {\n        buffer: outputBuffer\n      }\n    }]\n\n  });\n\n  const encoder = globalThis._TRAMPOLINE_(\"createCommandEncoder\", t.device, t.device.createCommandEncoder, [], () => t.device.createCommandEncoder());\n  const pass = encoder.beginComputePass();\n  pass.setPipeline(pipeline);\n  pass.setBindGroup(0, bindGroup);\n  pass.dispatchWorkgroups(1);\n  pass.end();\n  globalThis._TRAMPOLINE_(\"submit\", t.device, t.device.queue.submit, [[encoder.finish()]], () => t.device.queue.submit([encoder.finish()]));\n\n  const idealReadbackData = new ReadbackTypedArray(\n    rep.componentOrder.map((c) => {\n      const value = rep.decode(componentData)[c];\n      assert(value !== undefined);\n      return value;\n    })\n  );\n\n  if (format === 'rgba8unorm-srgb' || format === 'bgra8unorm-srgb') {\n    // The SRGB -> float conversion is permitted a tolerance of 0.5f ULP on the SRGB side. The\n    // procedure for measuring this tolerance is to convert the result back into SRGB space\n    // using the ideal float -> SRGB conversion specified below but WITHOUT the rounding to integer,\n    // and taking the floating point difference versus the original SRGB value to yield the error.\n    // Exact conversion is required: 0.0f and 1.0f (the ends) must be exactly achievable.\n    const readBackValue = await t.readGPUBufferRangeTyped(outputBuffer, {\n      type: Float32Array,\n      typedLength: 4\n    });\n    // Gamma correction shouldn't be applied to the alpha channel.\n    t.expect(idealReadbackData[3] === readBackValue.data[3]);\n\n    // Do the ideal float -> 8unorm-srgb conversion on the readback float value without the rounding\n    // to integer.\n    const readBackValueToSRGB = new Array(3);\n    for (let i = 0; i < 3; ++i) {\n      const gammaCompressed = gammaCompress(readBackValue.data[i]);\n      let outputIndex = i;\n      if (format === 'bgra8unorm-srgb' && (i === 0 || i === 2)) {\n        outputIndex = 2 - i;\n      }\n      readBackValueToSRGB[outputIndex] = floatAsNormalizedIntegerUnquantized(\n        gammaCompressed,\n        8,\n        false\n      );\n    }\n    readBackValue.cleanup();\n\n    // Take the floating point difference versus the original SRGB value to yield the error.\n    const check8UnormSRGB = (inputValue, idealValue) => {\n      const kToleranceULP = 0.5;\n      if (idealValue === 0 || idealValue === 255) {\n        t.expect(inputValue === idealValue);\n      } else {\n        t.expect(Math.abs(inputValue - idealValue) <= kToleranceULP);\n      }\n    };\n\n    assert(\n      componentData.R !== undefined &&\n      componentData.G !== undefined &&\n      componentData.B !== undefined\n    );\n    check8UnormSRGB(readBackValueToSRGB[0], componentData.R);\n    check8UnormSRGB(readBackValueToSRGB[1], componentData.G);\n    check8UnormSRGB(readBackValueToSRGB[2], componentData.B);\n  } else {\n    t.expectGPUBufferValuesEqual(outputBuffer, idealReadbackData);\n  }\n}\n\n// Make a test parameter by mapping a format and each component to a texel component\n// data value.\nfunction makeParam(\nformat,\nfn)\n{\n  const rep = kTexelRepresentationInfo[format];\n  return {\n    R: rep.componentInfo.R ? fn(rep.componentInfo.R.bitLength, 0) : undefined,\n    G: rep.componentInfo.G ? fn(rep.componentInfo.G.bitLength, 1) : undefined,\n    B: rep.componentInfo.B ? fn(rep.componentInfo.B.bitLength, 2) : undefined,\n    A: rep.componentInfo.A ? fn(rep.componentInfo.A.bitLength, 3) : undefined\n  };\n}\n\ng.test('unorm_texel_data_in_shader').\nparams((u) =>\nu.\ncombine('format', kEncodableTextureFormats).\nfilter(({ format }) => {\n  const info = kTextureFormatInfo[format];\n  return !!info.color && info.color.copyDst && getSingleDataType(format) === 'unorm';\n}).\nbeginSubcases().\nexpand('componentData', ({ format }) => {\n  const max = (bitLength) => Math.pow(2, bitLength) - 1;\n  return [\n  // Test extrema\n  makeParam(format, () => 0),\n  makeParam(format, (bitLength) => max(bitLength)),\n\n  // Test a middle value\n  makeParam(format, (bitLength) => Math.floor(max(bitLength) / 2)),\n\n  // Test mixed values\n  makeParam(format, (bitLength, i) => {\n    const offset = [0.13, 0.63, 0.42, 0.89];\n    return Math.floor(offset[i] * max(bitLength));\n  })];\n\n})\n).\nbeforeAllSubcases((t) => {\n  t.skipIfTextureFormatNotSupported(t.params.format);\n}).\nfn(doTest);\n\ng.test('snorm_texel_data_in_shader').\nparams((u) =>\nu.\ncombine('format', kEncodableTextureFormats).\nfilter(({ format }) => {\n  const info = kTextureFormatInfo[format];\n  return !!info.color && info.color.copyDst && getSingleDataType(format) === 'snorm';\n}).\nbeginSubcases().\nexpand('componentData', ({ format }) => {\n  const max = (bitLength) => Math.pow(2, bitLength - 1) - 1;\n  return [\n  // Test extrema\n  makeParam(format, () => 0),\n  makeParam(format, (bitLength) => max(bitLength)),\n  makeParam(format, (bitLength) => -max(bitLength)),\n  makeParam(format, (bitLength) => -max(bitLength) - 1),\n\n  // Test a middle value\n  makeParam(format, (bitLength) => Math.floor(max(bitLength) / 2)),\n\n  // Test mixed values\n  makeParam(format, (bitLength, i) => {\n    const offset = [0.13, 0.63, 0.42, 0.89];\n    const range = 2 * max(bitLength);\n    return -max(bitLength) + Math.floor(offset[i] * range);\n  })];\n\n})\n).\nfn(doTest);\n\ng.test('uint_texel_data_in_shader').\nparams((u) =>\nu.\ncombine('format', kEncodableTextureFormats).\nfilter(({ format }) => {\n  const info = kTextureFormatInfo[format];\n  return !!info.color && info.color.copyDst && getSingleDataType(format) === 'uint';\n}).\nbeginSubcases().\nexpand('componentData', ({ format }) => {\n  const max = (bitLength) => Math.pow(2, bitLength) - 1;\n  return [\n  // Test extrema\n  makeParam(format, () => 0),\n  makeParam(format, (bitLength) => max(bitLength)),\n\n  // Test a middle value\n  makeParam(format, (bitLength) => Math.floor(max(bitLength) / 2)),\n\n  // Test mixed values\n  makeParam(format, (bitLength, i) => {\n    const offset = [0.13, 0.63, 0.42, 0.89];\n    return Math.floor(offset[i] * max(bitLength));\n  })];\n\n})\n).\nfn(doTest);\n\ng.test('sint_texel_data_in_shader').\nparams((u) =>\nu.\ncombine('format', kEncodableTextureFormats).\nfilter(({ format }) => {\n  const info = kTextureFormatInfo[format];\n  return !!info.color && info.color.copyDst && getSingleDataType(format) === 'sint';\n}).\nbeginSubcases().\nexpand('componentData', ({ format }) => {\n  const max = (bitLength) => Math.pow(2, bitLength - 1) - 1;\n  return [\n  // Test extrema\n  makeParam(format, () => 0),\n  makeParam(format, (bitLength) => max(bitLength)),\n  makeParam(format, (bitLength) => -max(bitLength) - 1),\n\n  // Test a middle value\n  makeParam(format, (bitLength) => Math.floor(max(bitLength) / 2)),\n\n  // Test mixed values\n  makeParam(format, (bitLength, i) => {\n    const offset = [0.13, 0.63, 0.42, 0.89];\n    const range = 2 * max(bitLength);\n    return -max(bitLength) + Math.floor(offset[i] * range);\n  })];\n\n})\n).\nfn(doTest);\n\ng.test('float_texel_data_in_shader').\ndesc(\n  `\nTODO: Test NaN, Infinity, -Infinity [1]`\n).\nparams((u) =>\nu.\ncombine('format', kEncodableTextureFormats).\nfilter(({ format }) => {\n  const info = kTextureFormatInfo[format];\n  return !!info.color && info.color.copyDst && getSingleDataType(format) === 'float';\n}).\nbeginSubcases().\nexpand('componentData', ({ format }) => {\n  return [\n  // Test extrema\n  makeParam(format, () => 0),\n\n  // [1]: Test NaN, Infinity, -Infinity\n\n  // Test some values\n  makeParam(format, () => 0.1199951171875),\n  makeParam(format, () => 1.4072265625),\n  makeParam(format, () => 24928),\n  makeParam(format, () => -0.1319580078125),\n  makeParam(format, () => -323.25),\n  makeParam(format, () => -7440),\n\n  // Test mixed values\n  makeParam(format, (bitLength, i) => {\n    return [24896, -0.1319580078125, -323.25, -234.375][i];\n  })];\n\n})\n).\nfn(doTest);\n\ng.test('ufloat_texel_data_in_shader').\ndesc(\n  `\nNote: this uses values that are representable by both rg11b10ufloat and rgb9e5ufloat.\n\nTODO: Test NaN, Infinity`\n).\nparams((u) =>\nu.\ncombine('format', kEncodableTextureFormats).\nfilter(({ format }) => {\n  const info = kTextureFormatInfo[format];\n  return !!info.color && info.color.copyDst && getSingleDataType(format) === 'ufloat';\n}).\nbeginSubcases().\nexpand('componentData', ({ format }) => {\n  return [\n  // Test extrema\n  makeParam(format, () => 0),\n\n  // Test some values\n  makeParam(format, () => 128),\n  makeParam(format, () => 1984),\n  makeParam(format, () => 3968),\n\n  // Test scattered mixed values\n  makeParam(format, (bitLength, i) => {\n    return [128, 1984, 3968][i];\n  }),\n\n  // Test mixed values that are close in magnitude.\n  makeParam(format, (bitLength, i) => {\n    return [0.05859375, 0.03125, 0.03515625][i];\n  })];\n\n})\n).\nfn(doTest);"],"mappings":";;IAAA;AACA;AACA,GAAG,OAAO,MAAMA,WAAW,GAAG,qEAAqE,CAAC,SAASC,aAAa,QAAQ,yCAAyC,CAC3K,SAASC,MAAM,QAAQ,8BAA8B,CACrD;EACEC,wBAAwB;EACxBC,kBAAkB;;AAEpB,sBAAsB;AACtB,SAASC,OAAO,QAAQ,mBAAmB;AAC3C,SAASC,aAAa,EAAEC,mCAAmC,QAAQ,kBAAkB;;AAErF;EACEC,wBAAwB;EACxBC,iBAAiB;EACjBC,0BAA0B;AAC5B,iBAAiB;;AAEjB,OAAO,MAAMC,CAAC,GAAGV,aAAa,CAACI,OAAO,CAAC;;AAEvC,eAAeO,MAAMA;AACrBC,CAAC;;;;;;;;;;;AAWD;EACE,MAAM,EAAEC,MAAM,CAAC,CAAC,GAAGD,CAAC,CAACE,MAAM;EAC3B,MAAMC,aAAa,GAAGH,CAAC,CAACE,MAAM,CAACC,aAAa;;EAE5C,MAAMC,GAAG,GAAGT,wBAAwB,CAACM,MAAM,CAAC;EAC5C,MAAMI,SAAS,GAAGD,GAAG,CAACE,IAAI,CAACH,aAAa,CAAC;EACzC,MAAMI,OAAO,GAAGP,CAAC,CAACQ,oBAAoB,CAAC;IACrCP,MAAM;IACNQ,IAAI,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IACfC,KAAK,EAAEC,eAAe,CAACC,QAAQ,GAAGD,eAAe,CAACE;EACpD,CAAC,CAAC;;EAEFb,CAAC,CAACc,MAAM,CAACC,KAAK,CAACC,YAAY;IACzB,EAAET,OAAO,CAAC,CAAC;IACXF,SAAS;IACT;MACEY,WAAW,EAAEZ,SAAS,CAACa;IACzB,CAAC;IACD,CAAC,CAAC;EACJ,CAAC;;EAED,MAAM,EAAEC,kBAAkB,EAAEC,UAAU,CAAC,CAAC,GAAGvB,0BAA0B,CAACD,iBAAiB,CAACK,MAAM,CAAC,CAAC;;EAEhG,MAAMoB,MAAM,GAAG;AACjB,+CAA+CD,UAAU;AACzD;AACA;AACA,MAAMhB,GAAG,CAACkB,cAAc,CAACC,GAAG,CAAC,CAACC,CAAC,KAAK,SAASA,CAAC,MAAMJ,UAAU,GAAG,CAAC,CAACK,IAAI,CAAC,IAAI,CAAC;AAC7E;AACA;AACA;AACA;AACA;AACA,yBAAyBL,UAAU;AACnC,QAAQhB,GAAG,CAACkB,cAAc,CAACC,GAAG,CAAC,CAACC,CAAC,KAAK,gBAAgBA,CAAC,YAAYA,CAAC,CAACE,WAAW,CAAC,CAAC,GAAG,CAAC,CAACD,IAAI,CAAC,IAAI,CAAC;AACjG;AACA,IAAI;;EAEF,MAAME,QAAQ,GAAG3B,CAAC,CAACc,MAAM,CAACc,qBAAqB,CAAC;IAC9CC,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MACPC,MAAM,EAAE/B,CAAC,CAACc,MAAM,CAACkB,kBAAkB,CAAC;QAClCC,IAAI,EAAEZ;MACR,CAAC,CAAC;MACFa,UAAU,EAAE;IACd;EACF,CAAC,CAAC;;EAEF,MAAMC,YAAY,GAAGnC,CAAC,CAACoC,mBAAmB,CAAC;IACzC3B,IAAI,EAAEL,GAAG,CAACkB,cAAc,CAACe,MAAM,GAAG,CAAC;IACnC3B,KAAK,EAAE4B,cAAc,CAACC,OAAO,GAAGD,cAAc,CAACE;EACjD,CAAC,CAAC;;EAEF,MAAMC,SAAS,GAAGzC,CAAC,CAACc,MAAM,CAAC4B,eAAe,CAAC;IACzCb,MAAM,EAAEF,QAAQ,CAACgB,kBAAkB,CAAC,CAAC,CAAC;IACtCC,OAAO,EAAE;IACT;MACEC,OAAO,EAAE,CAAC;MACVC,QAAQ,EAAEvC,OAAO,CAACwC,UAAU,CAAC;IAC/B,CAAC;IACD;MACEF,OAAO,EAAE,CAAC;MACVC,QAAQ,EAAE;QACRE,MAAM,EAAEb;MACV;IACF,CAAC;;EAEH,CAAC,CAAC;;EAEF,MAAMc,OAAO,GAAGC,UAAU,CAACC,YAAY,CAAC,sBAAsB,EAAEnD,CAAC,CAACc,MAAM,EAAEd,CAAC,CAACc,MAAM,CAACsC,oBAAoB,EAAE,EAAE,EAAE,MAAAF,UAAA,CAAAC,YAAA,yBAAMnD,CAAC,CAACc,MAAM,EAARd,CAAC,CAACc,MAAM,CAAAsC,oBAAA,YAARpD,CAAC,CAACc,MAAM,CAACsC,oBAAoB,GAAE,CAAC;EACnJ,MAAMC,IAAI,GAAGJ,OAAO,CAACK,gBAAgB,CAAC,CAAC;EACvCD,IAAI,CAACE,WAAW,CAAC5B,QAAQ,CAAC;EAC1B0B,IAAI,CAACG,YAAY,CAAC,CAAC,EAAEf,SAAS,CAAC;EAC/BY,IAAI,CAACI,kBAAkB,CAAC,CAAC,CAAC;EAC1BJ,IAAI,CAACK,GAAG,CAAC,CAAC;EACVR,UAAU,CAACC,YAAY,CAAC,QAAQ,EAAEnD,CAAC,CAACc,MAAM,EAAEd,CAAC,CAACc,MAAM,CAACC,KAAK,CAAC4C,MAAM,EAAE,CAAC,CAACV,OAAO,CAACW,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE,MAAAV,UAAA,CAAAC,YAAA,WAAMnD,CAAC,CAACc,MAAM,EAARd,CAAC,CAACc,MAAM,CAACC,KAAK,CAAA4C,MAAA,GAAQ,CAACV,OAAO,CAACW,MAAM,CAAC,CAAC,CAAC,SAAxC5D,CAAC,CAACc,MAAM,CAACC,KAAK,CAAC4C,MAAM,CAAC,CAACV,OAAO,CAACW,MAAM,CAAC,CAAC,CAAC,EAAC,CAAC;;EAEzI,MAAMC,iBAAiB,GAAG,IAAI1C,kBAAkB;IAC9Cf,GAAG,CAACkB,cAAc,CAACC,GAAG,CAAC,CAACuC,CAAC,KAAK;MAC5B,MAAMC,KAAK,GAAG3D,GAAG,CAAC4D,MAAM,CAAC7D,aAAa,CAAC,CAAC2D,CAAC,CAAC;MAC1CzE,MAAM,CAAC0E,KAAK,KAAKE,SAAS,CAAC;MAC3B,OAAOF,KAAK;IACd,CAAC;EACH,CAAC;;EAED,IAAI9D,MAAM,KAAK,iBAAiB,IAAIA,MAAM,KAAK,iBAAiB,EAAE;IAChE;IACA;IACA;IACA;IACA;IACA,MAAMiE,aAAa,GAAG,MAAMlE,CAAC,CAACmE,uBAAuB,CAAChC,YAAY,EAAE;MAClEiC,IAAI,EAAEC,YAAY;MAClBC,WAAW,EAAE;IACf,CAAC,CAAC;IACF;IACAtE,CAAC,CAACuE,MAAM,CAACV,iBAAiB,CAAC,CAAC,CAAC,KAAKK,aAAa,CAACM,IAAI,CAAC,CAAC,CAAC,CAAC;;IAExD;IACA;IACA,MAAMC,mBAAmB,GAAG,IAAIC,KAAK,CAAC,CAAC,CAAC;IACxC,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,CAAC,EAAE,EAAEA,CAAC,EAAE;MAC1B,MAAMC,eAAe,GAAGnF,aAAa,CAACyE,aAAa,CAACM,IAAI,CAACG,CAAC,CAAC,CAAC;MAC5D,IAAIE,WAAW,GAAGF,CAAC;MACnB,IAAI1E,MAAM,KAAK,iBAAiB,KAAK0E,CAAC,KAAK,CAAC,IAAIA,CAAC,KAAK,CAAC,CAAC,EAAE;QACxDE,WAAW,GAAG,CAAC,GAAGF,CAAC;MACrB;MACAF,mBAAmB,CAACI,WAAW,CAAC,GAAGnF,mCAAmC;QACpEkF,eAAe;QACf,CAAC;QACD;MACF,CAAC;IACH;IACAV,aAAa,CAACY,OAAO,CAAC,CAAC;;IAEvB;IACA,MAAMC,eAAe,GAAGA,CAACC,UAAU,EAAEC,UAAU,KAAK;MAClD,MAAMC,aAAa,GAAG,GAAG;MACzB,IAAID,UAAU,KAAK,CAAC,IAAIA,UAAU,KAAK,GAAG,EAAE;QAC1CjF,CAAC,CAACuE,MAAM,CAACS,UAAU,KAAKC,UAAU,CAAC;MACrC,CAAC,MAAM;QACLjF,CAAC,CAACuE,MAAM,CAACY,IAAI,CAACC,GAAG,CAACJ,UAAU,GAAGC,UAAU,CAAC,IAAIC,aAAa,CAAC;MAC9D;IACF,CAAC;;IAED7F,MAAM;MACJc,aAAa,CAACkF,CAAC,KAAKpB,SAAS;MAC7B9D,aAAa,CAACmF,CAAC,KAAKrB,SAAS;MAC7B9D,aAAa,CAACoF,CAAC,KAAKtB;IACtB,CAAC;IACDc,eAAe,CAACN,mBAAmB,CAAC,CAAC,CAAC,EAAEtE,aAAa,CAACkF,CAAC,CAAC;IACxDN,eAAe,CAACN,mBAAmB,CAAC,CAAC,CAAC,EAAEtE,aAAa,CAACmF,CAAC,CAAC;IACxDP,eAAe,CAACN,mBAAmB,CAAC,CAAC,CAAC,EAAEtE,aAAa,CAACoF,CAAC,CAAC;EAC1D,CAAC,MAAM;IACLvF,CAAC,CAACwF,0BAA0B,CAACrD,YAAY,EAAE0B,iBAAiB,CAAC;EAC/D;AACF;;AAEA;AACA;AACA,SAAS4B,SAASA;AAClBxF,MAAM;AACNyF,EAAE;AACF;EACE,MAAMtF,GAAG,GAAGT,wBAAwB,CAACM,MAAM,CAAC;EAC5C,OAAO;IACLoF,CAAC,EAAEjF,GAAG,CAACuF,aAAa,CAACN,CAAC,GAAGK,EAAE,CAACtF,GAAG,CAACuF,aAAa,CAACN,CAAC,CAACO,SAAS,EAAE,CAAC,CAAC,GAAG3B,SAAS;IACzEqB,CAAC,EAAElF,GAAG,CAACuF,aAAa,CAACL,CAAC,GAAGI,EAAE,CAACtF,GAAG,CAACuF,aAAa,CAACL,CAAC,CAACM,SAAS,EAAE,CAAC,CAAC,GAAG3B,SAAS;IACzEsB,CAAC,EAAEnF,GAAG,CAACuF,aAAa,CAACJ,CAAC,GAAGG,EAAE,CAACtF,GAAG,CAACuF,aAAa,CAACJ,CAAC,CAACK,SAAS,EAAE,CAAC,CAAC,GAAG3B,SAAS;IACzE4B,CAAC,EAAEzF,GAAG,CAACuF,aAAa,CAACE,CAAC,GAAGH,EAAE,CAACtF,GAAG,CAACuF,aAAa,CAACE,CAAC,CAACD,SAAS,EAAE,CAAC,CAAC,GAAG3B;EAClE,CAAC;AACH;;AAEAnE,CAAC,CAACgG,IAAI,CAAC,4BAA4B,CAAC;AACpC5F,MAAM,CAAC,CAAC6F,CAAC;AACTA,CAAC;AACDC,OAAO,CAAC,QAAQ,EAAE1G,wBAAwB,CAAC;AAC3C2G,MAAM,CAAC,CAAC,EAAEhG,MAAM,CAAC,CAAC,KAAK;EACrB,MAAMiG,IAAI,GAAG3G,kBAAkB,CAACU,MAAM,CAAC;EACvC,OAAO,CAAC,CAACiG,IAAI,CAACC,KAAK,IAAID,IAAI,CAACC,KAAK,CAACC,OAAO,IAAIxG,iBAAiB,CAACK,MAAM,CAAC,KAAK,OAAO;AACpF,CAAC,CAAC;AACFoG,aAAa,CAAC,CAAC;AACfC,MAAM,CAAC,eAAe,EAAE,CAAC,EAAErG,MAAM,CAAC,CAAC,KAAK;EACtC,MAAMsG,GAAG,GAAGA,CAACX,SAAS,KAAKT,IAAI,CAACqB,GAAG,CAAC,CAAC,EAAEZ,SAAS,CAAC,GAAG,CAAC;EACrD,OAAO;EACP;EACAH,SAAS,CAACxF,MAAM,EAAE,MAAM,CAAC,CAAC;EAC1BwF,SAAS,CAACxF,MAAM,EAAE,CAAC2F,SAAS,KAAKW,GAAG,CAACX,SAAS,CAAC,CAAC;;EAEhD;EACAH,SAAS,CAACxF,MAAM,EAAE,CAAC2F,SAAS,KAAKT,IAAI,CAACsB,KAAK,CAACF,GAAG,CAACX,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC;;EAEhE;EACAH,SAAS,CAACxF,MAAM,EAAE,CAAC2F,SAAS,EAAEjB,CAAC,KAAK;IAClC,MAAM+B,MAAM,GAAG,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC;IACvC,OAAOvB,IAAI,CAACsB,KAAK,CAACC,MAAM,CAAC/B,CAAC,CAAC,GAAG4B,GAAG,CAACX,SAAS,CAAC,CAAC;EAC/C,CAAC,CAAC,CAAC;;AAEL,CAAC;AACD,CAAC;AACDe,iBAAiB,CAAC,CAAC3G,CAAC,KAAK;EACvBA,CAAC,CAAC4G,+BAA+B,CAAC5G,CAAC,CAACE,MAAM,CAACD,MAAM,CAAC;AACpD,CAAC,CAAC;AACFyF,EAAE,CAAC3F,MAAM,CAAC;;AAEVD,CAAC,CAACgG,IAAI,CAAC,4BAA4B,CAAC;AACpC5F,MAAM,CAAC,CAAC6F,CAAC;AACTA,CAAC;AACDC,OAAO,CAAC,QAAQ,EAAE1G,wBAAwB,CAAC;AAC3C2G,MAAM,CAAC,CAAC,EAAEhG,MAAM,CAAC,CAAC,KAAK;EACrB,MAAMiG,IAAI,GAAG3G,kBAAkB,CAACU,MAAM,CAAC;EACvC,OAAO,CAAC,CAACiG,IAAI,CAACC,KAAK,IAAID,IAAI,CAACC,KAAK,CAACC,OAAO,IAAIxG,iBAAiB,CAACK,MAAM,CAAC,KAAK,OAAO;AACpF,CAAC,CAAC;AACFoG,aAAa,CAAC,CAAC;AACfC,MAAM,CAAC,eAAe,EAAE,CAAC,EAAErG,MAAM,CAAC,CAAC,KAAK;EACtC,MAAMsG,GAAG,GAAGA,CAACX,SAAS,KAAKT,IAAI,CAACqB,GAAG,CAAC,CAAC,EAAEZ,SAAS,GAAG,CAAC,CAAC,GAAG,CAAC;EACzD,OAAO;EACP;EACAH,SAAS,CAACxF,MAAM,EAAE,MAAM,CAAC,CAAC;EAC1BwF,SAAS,CAACxF,MAAM,EAAE,CAAC2F,SAAS,KAAKW,GAAG,CAACX,SAAS,CAAC,CAAC;EAChDH,SAAS,CAACxF,MAAM,EAAE,CAAC2F,SAAS,KAAK,CAACW,GAAG,CAACX,SAAS,CAAC,CAAC;EACjDH,SAAS,CAACxF,MAAM,EAAE,CAAC2F,SAAS,KAAK,CAACW,GAAG,CAACX,SAAS,CAAC,GAAG,CAAC,CAAC;;EAErD;EACAH,SAAS,CAACxF,MAAM,EAAE,CAAC2F,SAAS,KAAKT,IAAI,CAACsB,KAAK,CAACF,GAAG,CAACX,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC;;EAEhE;EACAH,SAAS,CAACxF,MAAM,EAAE,CAAC2F,SAAS,EAAEjB,CAAC,KAAK;IAClC,MAAM+B,MAAM,GAAG,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC;IACvC,MAAMG,KAAK,GAAG,CAAC,GAAGN,GAAG,CAACX,SAAS,CAAC;IAChC,OAAO,CAACW,GAAG,CAACX,SAAS,CAAC,GAAGT,IAAI,CAACsB,KAAK,CAACC,MAAM,CAAC/B,CAAC,CAAC,GAAGkC,KAAK,CAAC;EACxD,CAAC,CAAC,CAAC;;AAEL,CAAC;AACD,CAAC;AACDnB,EAAE,CAAC3F,MAAM,CAAC;;AAEVD,CAAC,CAACgG,IAAI,CAAC,2BAA2B,CAAC;AACnC5F,MAAM,CAAC,CAAC6F,CAAC;AACTA,CAAC;AACDC,OAAO,CAAC,QAAQ,EAAE1G,wBAAwB,CAAC;AAC3C2G,MAAM,CAAC,CAAC,EAAEhG,MAAM,CAAC,CAAC,KAAK;EACrB,MAAMiG,IAAI,GAAG3G,kBAAkB,CAACU,MAAM,CAAC;EACvC,OAAO,CAAC,CAACiG,IAAI,CAACC,KAAK,IAAID,IAAI,CAACC,KAAK,CAACC,OAAO,IAAIxG,iBAAiB,CAACK,MAAM,CAAC,KAAK,MAAM;AACnF,CAAC,CAAC;AACFoG,aAAa,CAAC,CAAC;AACfC,MAAM,CAAC,eAAe,EAAE,CAAC,EAAErG,MAAM,CAAC,CAAC,KAAK;EACtC,MAAMsG,GAAG,GAAGA,CAACX,SAAS,KAAKT,IAAI,CAACqB,GAAG,CAAC,CAAC,EAAEZ,SAAS,CAAC,GAAG,CAAC;EACrD,OAAO;EACP;EACAH,SAAS,CAACxF,MAAM,EAAE,MAAM,CAAC,CAAC;EAC1BwF,SAAS,CAACxF,MAAM,EAAE,CAAC2F,SAAS,KAAKW,GAAG,CAACX,SAAS,CAAC,CAAC;;EAEhD;EACAH,SAAS,CAACxF,MAAM,EAAE,CAAC2F,SAAS,KAAKT,IAAI,CAACsB,KAAK,CAACF,GAAG,CAACX,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC;;EAEhE;EACAH,SAAS,CAACxF,MAAM,EAAE,CAAC2F,SAAS,EAAEjB,CAAC,KAAK;IAClC,MAAM+B,MAAM,GAAG,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC;IACvC,OAAOvB,IAAI,CAACsB,KAAK,CAACC,MAAM,CAAC/B,CAAC,CAAC,GAAG4B,GAAG,CAACX,SAAS,CAAC,CAAC;EAC/C,CAAC,CAAC,CAAC;;AAEL,CAAC;AACD,CAAC;AACDF,EAAE,CAAC3F,MAAM,CAAC;;AAEVD,CAAC,CAACgG,IAAI,CAAC,2BAA2B,CAAC;AACnC5F,MAAM,CAAC,CAAC6F,CAAC;AACTA,CAAC;AACDC,OAAO,CAAC,QAAQ,EAAE1G,wBAAwB,CAAC;AAC3C2G,MAAM,CAAC,CAAC,EAAEhG,MAAM,CAAC,CAAC,KAAK;EACrB,MAAMiG,IAAI,GAAG3G,kBAAkB,CAACU,MAAM,CAAC;EACvC,OAAO,CAAC,CAACiG,IAAI,CAACC,KAAK,IAAID,IAAI,CAACC,KAAK,CAACC,OAAO,IAAIxG,iBAAiB,CAACK,MAAM,CAAC,KAAK,MAAM;AACnF,CAAC,CAAC;AACFoG,aAAa,CAAC,CAAC;AACfC,MAAM,CAAC,eAAe,EAAE,CAAC,EAAErG,MAAM,CAAC,CAAC,KAAK;EACtC,MAAMsG,GAAG,GAAGA,CAACX,SAAS,KAAKT,IAAI,CAACqB,GAAG,CAAC,CAAC,EAAEZ,SAAS,GAAG,CAAC,CAAC,GAAG,CAAC;EACzD,OAAO;EACP;EACAH,SAAS,CAACxF,MAAM,EAAE,MAAM,CAAC,CAAC;EAC1BwF,SAAS,CAACxF,MAAM,EAAE,CAAC2F,SAAS,KAAKW,GAAG,CAACX,SAAS,CAAC,CAAC;EAChDH,SAAS,CAACxF,MAAM,EAAE,CAAC2F,SAAS,KAAK,CAACW,GAAG,CAACX,SAAS,CAAC,GAAG,CAAC,CAAC;;EAErD;EACAH,SAAS,CAACxF,MAAM,EAAE,CAAC2F,SAAS,KAAKT,IAAI,CAACsB,KAAK,CAACF,GAAG,CAACX,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC;;EAEhE;EACAH,SAAS,CAACxF,MAAM,EAAE,CAAC2F,SAAS,EAAEjB,CAAC,KAAK;IAClC,MAAM+B,MAAM,GAAG,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC;IACvC,MAAMG,KAAK,GAAG,CAAC,GAAGN,GAAG,CAACX,SAAS,CAAC;IAChC,OAAO,CAACW,GAAG,CAACX,SAAS,CAAC,GAAGT,IAAI,CAACsB,KAAK,CAACC,MAAM,CAAC/B,CAAC,CAAC,GAAGkC,KAAK,CAAC;EACxD,CAAC,CAAC,CAAC;;AAEL,CAAC;AACD,CAAC;AACDnB,EAAE,CAAC3F,MAAM,CAAC;;AAEVD,CAAC,CAACgG,IAAI,CAAC,4BAA4B,CAAC;AACpCgB,IAAI;EACF;AACF;AACA,CAAC;AACD5G,MAAM,CAAC,CAAC6F,CAAC;AACTA,CAAC;AACDC,OAAO,CAAC,QAAQ,EAAE1G,wBAAwB,CAAC;AAC3C2G,MAAM,CAAC,CAAC,EAAEhG,MAAM,CAAC,CAAC,KAAK;EACrB,MAAMiG,IAAI,GAAG3G,kBAAkB,CAACU,MAAM,CAAC;EACvC,OAAO,CAAC,CAACiG,IAAI,CAACC,KAAK,IAAID,IAAI,CAACC,KAAK,CAACC,OAAO,IAAIxG,iBAAiB,CAACK,MAAM,CAAC,KAAK,OAAO;AACpF,CAAC,CAAC;AACFoG,aAAa,CAAC,CAAC;AACfC,MAAM,CAAC,eAAe,EAAE,CAAC,EAAErG,MAAM,CAAC,CAAC,KAAK;EACtC,OAAO;EACP;EACAwF,SAAS,CAACxF,MAAM,EAAE,MAAM,CAAC,CAAC;;EAE1B;;EAEA;EACAwF,SAAS,CAACxF,MAAM,EAAE,MAAM,eAAe,CAAC;EACxCwF,SAAS,CAACxF,MAAM,EAAE,MAAM,YAAY,CAAC;EACrCwF,SAAS,CAACxF,MAAM,EAAE,MAAM,KAAK,CAAC;EAC9BwF,SAAS,CAACxF,MAAM,EAAE,MAAM,CAAC,eAAe,CAAC;EACzCwF,SAAS,CAACxF,MAAM,EAAE,MAAM,CAAC,MAAM,CAAC;EAChCwF,SAAS,CAACxF,MAAM,EAAE,MAAM,CAAC,IAAI,CAAC;;EAE9B;EACAwF,SAAS,CAACxF,MAAM,EAAE,CAAC2F,SAAS,EAAEjB,CAAC,KAAK;IAClC,OAAO,CAAC,KAAK,EAAE,CAAC,eAAe,EAAE,CAAC,MAAM,EAAE,CAAC,OAAO,CAAC,CAACA,CAAC,CAAC;EACxD,CAAC,CAAC,CAAC;;AAEL,CAAC;AACD,CAAC;AACDe,EAAE,CAAC3F,MAAM,CAAC;;AAEVD,CAAC,CAACgG,IAAI,CAAC,6BAA6B,CAAC;AACrCgB,IAAI;EACF;AACF;AACA;AACA;AACA,CAAC;AACD5G,MAAM,CAAC,CAAC6F,CAAC;AACTA,CAAC;AACDC,OAAO,CAAC,QAAQ,EAAE1G,wBAAwB,CAAC;AAC3C2G,MAAM,CAAC,CAAC,EAAEhG,MAAM,CAAC,CAAC,KAAK;EACrB,MAAMiG,IAAI,GAAG3G,kBAAkB,CAACU,MAAM,CAAC;EACvC,OAAO,CAAC,CAACiG,IAAI,CAACC,KAAK,IAAID,IAAI,CAACC,KAAK,CAACC,OAAO,IAAIxG,iBAAiB,CAACK,MAAM,CAAC,KAAK,QAAQ;AACrF,CAAC,CAAC;AACFoG,aAAa,CAAC,CAAC;AACfC,MAAM,CAAC,eAAe,EAAE,CAAC,EAAErG,MAAM,CAAC,CAAC,KAAK;EACtC,OAAO;EACP;EACAwF,SAAS,CAACxF,MAAM,EAAE,MAAM,CAAC,CAAC;;EAE1B;EACAwF,SAAS,CAACxF,MAAM,EAAE,MAAM,GAAG,CAAC;EAC5BwF,SAAS,CAACxF,MAAM,EAAE,MAAM,IAAI,CAAC;EAC7BwF,SAAS,CAACxF,MAAM,EAAE,MAAM,IAAI,CAAC;;EAE7B;EACAwF,SAAS,CAACxF,MAAM,EAAE,CAAC2F,SAAS,EAAEjB,CAAC,KAAK;IAClC,OAAO,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI,CAAC,CAACA,CAAC,CAAC;EAC7B,CAAC,CAAC;;EAEF;EACAc,SAAS,CAACxF,MAAM,EAAE,CAAC2F,SAAS,EAAEjB,CAAC,KAAK;IAClC,OAAO,CAAC,UAAU,EAAE,OAAO,EAAE,UAAU,CAAC,CAACA,CAAC,CAAC;EAC7C,CAAC,CAAC,CAAC;;AAEL,CAAC;AACD,CAAC;AACDe,EAAE,CAAC3F,MAAM,CAAC","ignoreList":[]}