{"version":3,"file":"debugMarker.spec.js","names":["description","makeTestGroup","ValidationTest","F","beginRenderPass","commandEncoder","attachmentTexture","createTextureTracked","format","size","width","height","depthOrArrayLayers","usage","GPUTextureUsage","RENDER_ATTACHMENT","colorAttachments","view","createView","clearValue","r","g","b","a","loadOp","storeOp","test","desc","paramsSubcasesOnly","u","combine","fn","t","pushCount","popCount","params","encoder","globalThis","_TRAMPOLINE_","device","createCommandEncoder","i","pushDebugGroup","insertDebugMarker","popDebugGroup","expectValidationError","finish","beginSubcases","passType","pass","beginComputePass","end"],"sources":["../../../../src/webgpu/api/validation/debugMarker.spec.ts"],"sourcesContent":["/**\n* AUTO-GENERATED - DO NOT EDIT. Source: https://github.com/gpuweb/cts\n**/export const description = `\nTest validation of pushDebugGroup, popDebugGroup, and insertDebugMarker.\n`;import { makeTestGroup } from '../../../common/framework/test_group.js';\n\nimport { ValidationTest } from './validation_test.js';\n\nclass F extends ValidationTest {\n  beginRenderPass(commandEncoder) {\n    const attachmentTexture = this.createTextureTracked({\n      format: 'rgba8unorm',\n      size: { width: 16, height: 16, depthOrArrayLayers: 1 },\n      usage: GPUTextureUsage.RENDER_ATTACHMENT\n    });\n    return commandEncoder.beginRenderPass({\n      colorAttachments: [\n      {\n        view: attachmentTexture.createView(),\n        clearValue: { r: 1.0, g: 0.0, b: 0.0, a: 1.0 },\n        loadOp: 'clear',\n        storeOp: 'store'\n      }]\n\n    });\n  }\n}\n\nexport const g = makeTestGroup(F);\n\ng.test('push_pop_call_count_unbalance,command_encoder').\ndesc(\n  `\n  Test that a validation error is generated if {push,pop} debug group call count is not paired.\n  `\n).\nparamsSubcasesOnly((u) =>\nu //\n.combine('pushCount', [1, 2, 3]).\ncombine('popCount', [1, 2, 3])\n).\nfn((t) => {\n  const { pushCount, popCount } = t.params;\n\n  const encoder = globalThis._TRAMPOLINE_(\"createCommandEncoder\", t.device, t.device.createCommandEncoder, [], () => t.device.createCommandEncoder());\n\n  for (let i = 0; i < pushCount; ++i) {\n    encoder.pushDebugGroup('EventStart');\n  }\n\n  encoder.insertDebugMarker('Marker');\n\n  for (let i = 0; i < popCount; ++i) {\n    encoder.popDebugGroup();\n  }\n\n  t.expectValidationError(() => {\n    encoder.finish();\n  }, pushCount !== popCount);\n});\n\ng.test('push_pop_call_count_unbalance,render_compute_pass').\ndesc(\n  `\n  Test that a validation error is generated if {push,pop} debug group call count is not paired in\n  ComputePassEncoder and RenderPassEncoder.\n  `\n).\nparams((u) =>\nu //\n.combine('passType', ['compute', 'render']).\nbeginSubcases().\ncombine('pushCount', [1, 2, 3]).\ncombine('popCount', [1, 2, 3])\n).\nfn((t) => {\n  const { passType, pushCount, popCount } = t.params;\n\n  const encoder = globalThis._TRAMPOLINE_(\"createCommandEncoder\", t.device, t.device.createCommandEncoder, [], () => t.device.createCommandEncoder());\n\n  const pass = passType === 'compute' ? encoder.beginComputePass() : t.beginRenderPass(encoder);\n\n  for (let i = 0; i < pushCount; ++i) {\n    pass.pushDebugGroup('EventStart');\n  }\n\n  pass.insertDebugMarker('Marker');\n\n  for (let i = 0; i < popCount; ++i) {\n    pass.popDebugGroup();\n  }\n\n  t.expectValidationError(() => {\n    pass.end();\n    encoder.finish();\n  }, pushCount !== popCount);\n});"],"mappings":"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","ignoreList":[]}