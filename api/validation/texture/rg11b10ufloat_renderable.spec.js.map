{"version":3,"file":"rg11b10ufloat_renderable.spec.js","names":["description","makeTestGroup","GPUConst","ValidationTest","g","test","desc","params","u","combine","beforeAllSubcases","t","selectDeviceOrSkipTestCase","fn","sampleCount","descriptor","size","format","usage","TextureUsage","RENDER_ATTACHMENT","createTextureTracked","texture","encoder","globalThis","_TRAMPOLINE_","device","createCommandEncoder","pass","beginRenderPass","colorAttachments","view","createView","clearValue","r","b","a","loadOp","storeOp","end","finish","renderTexture","resolveTexture","resolveTarget","createRenderBundleEncoder","colorFormats","createRenderPipeline","layout","vertex","module","createShaderModule","code","getNoOpShaderCode","entryPoint","fragment","targets","writeMask","primitive","topology"],"sources":["../../../../../src/webgpu/api/validation/texture/rg11b10ufloat_renderable.spec.ts"],"sourcesContent":["/**\n* AUTO-GENERATED - DO NOT EDIT. Source: https://github.com/gpuweb/cts\n**/export const description = `\nTests for capabilities added by rg11b10ufloat-renderable flag.\n`;import { makeTestGroup } from '../../../../common/framework/test_group.js';\nimport { GPUConst } from '../../../constants.js';\nimport { ValidationTest } from '../validation_test.js';\n\nexport const g = makeTestGroup(ValidationTest);\n\ng.test('create_texture').\ndesc(\n  `\nTest that it is valid to create rg11b10ufloat texture with RENDER_ATTACHMENT usage and/or\nsampleCount > 1, iff rg11b10ufloat-renderable feature is enabled.\nNote, the createTexture tests cover these validation cases where this feature is not enabled.\n`\n).\nparams((u) => u.combine('sampleCount', [1, 4])).\nbeforeAllSubcases((t) => {\n  t.selectDeviceOrSkipTestCase('rg11b10ufloat-renderable');\n}).\nfn((t) => {\n  const { sampleCount } = t.params;\n  const descriptor = {\n    size: [1, 1, 1],\n    format: 'rg11b10ufloat',\n    sampleCount,\n    usage: GPUConst.TextureUsage.RENDER_ATTACHMENT\n  };\n  t.createTextureTracked(descriptor);\n});\n\ng.test('begin_render_pass_single_sampled').\ndesc(\n  `\nTest that it is valid to begin render pass with rg11b10ufloat texture format\niff rg11b10ufloat-renderable feature is enabled. Single sampled case.\n`\n).\nbeforeAllSubcases((t) => {\n  t.selectDeviceOrSkipTestCase('rg11b10ufloat-renderable');\n}).\nfn((t) => {\n  const texture = t.createTextureTracked({\n    size: [1, 1, 1],\n    format: 'rg11b10ufloat',\n    sampleCount: 1,\n    usage: GPUConst.TextureUsage.RENDER_ATTACHMENT\n  });\n  const encoder = globalThis._TRAMPOLINE_(\"createCommandEncoder\", t.device, t.device.createCommandEncoder, [], () => t.device.createCommandEncoder());\n  const pass = encoder.beginRenderPass({\n    colorAttachments: [\n    {\n      view: texture.createView(),\n      clearValue: { r: 1.0, g: 0.0, b: 0.0, a: 1.0 },\n      loadOp: 'clear',\n      storeOp: 'store'\n    }]\n\n  });\n  pass.end();\n  encoder.finish();\n});\n\ng.test('begin_render_pass_msaa_and_resolve').\ndesc(\n  `\nTest that it is valid to begin render pass with rg11b10ufloat texture format\niff rg11b10ufloat-renderable feature is enabled. MSAA and resolve case.\n`\n).\nbeforeAllSubcases((t) => {\n  t.selectDeviceOrSkipTestCase('rg11b10ufloat-renderable');\n}).\nfn((t) => {\n  const renderTexture = t.createTextureTracked({\n    size: [1, 1, 1],\n    format: 'rg11b10ufloat',\n    sampleCount: 4,\n    usage: GPUConst.TextureUsage.RENDER_ATTACHMENT\n  });\n  const resolveTexture = t.createTextureTracked({\n    size: [1, 1, 1],\n    format: 'rg11b10ufloat',\n    sampleCount: 1,\n    usage: GPUConst.TextureUsage.RENDER_ATTACHMENT\n  });\n  const encoder = globalThis._TRAMPOLINE_(\"createCommandEncoder\", t.device, t.device.createCommandEncoder, [], () => t.device.createCommandEncoder());\n  const pass = encoder.beginRenderPass({\n    colorAttachments: [\n    {\n      view: renderTexture.createView(),\n      resolveTarget: resolveTexture.createView(),\n      clearValue: { r: 1.0, g: 0.0, b: 0.0, a: 1.0 },\n      loadOp: 'clear',\n      storeOp: 'store'\n    }]\n\n  });\n  pass.end();\n  encoder.finish();\n});\n\ng.test('begin_render_bundle_encoder').\ndesc(\n  `\nTest that it is valid to begin render bundle encoder with rg11b10ufloat texture\nformat iff rg11b10ufloat-renderable feature is enabled.\n`\n).\nbeforeAllSubcases((t) => {\n  t.selectDeviceOrSkipTestCase('rg11b10ufloat-renderable');\n}).\nfn((t) => {\n  t.device.createRenderBundleEncoder({\n    colorFormats: ['rg11b10ufloat']\n  });\n});\n\ng.test('create_render_pipeline').\ndesc(\n  `\nTest that it is valid to create render pipeline with rg11b10ufloat texture format\nin descriptor.fragment.targets iff rg11b10ufloat-renderable feature is enabled.\n`\n).\nbeforeAllSubcases((t) => {\n  t.selectDeviceOrSkipTestCase('rg11b10ufloat-renderable');\n}).\nfn((t) => {\n  t.device.createRenderPipeline({\n    layout: 'auto',\n    vertex: {\n      module: t.device.createShaderModule({\n        code: t.getNoOpShaderCode('VERTEX')\n      }),\n      entryPoint: 'main'\n    },\n    fragment: {\n      module: t.device.createShaderModule({\n        code: t.getNoOpShaderCode('FRAGMENT')\n      }),\n      entryPoint: 'main',\n      targets: [{ format: 'rg11b10ufloat', writeMask: 0 }]\n    },\n    primitive: { topology: 'triangle-list' }\n  });\n});"],"mappings":"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","ignoreList":[]}