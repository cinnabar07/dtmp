{"version":3,"file":"copyTextureToTexture.spec.js","names":["description","makeTestGroup","kAllTextureFormats","kCompressedTextureFormats","kTextureFormatInfo","CompatibilityTest","g","test","desc","params","u","combine","beforeAllSubcases","t","format","selectDeviceOrSkipTestCase","feature","fn","blockWidth","blockHeight","srcTexture","createTextureTracked","size","usage","GPUTextureUsage","COPY_SRC","dstTexture","COPY_DST","encoder","globalThis","_TRAMPOLINE_","device","createCommandEncoder","copyTextureToTexture","texture","expectGPUErrorInCompatibilityMode","finish","beginSubcases","filter","info","multisample","skipIfTextureFormatNotSupported","sampleCount","RENDER_ATTACHMENT"],"sources":["../../../../../../../src/webgpu/compat/api/validation/encoding/cmds/copyTextureToTexture.spec.ts"],"sourcesContent":["/**\n* AUTO-GENERATED - DO NOT EDIT. Source: https://github.com/gpuweb/cts\n**/export const description = `\nTests limitations of copyTextureToTextures in compat mode.\n`;import { makeTestGroup } from '../../../../../../common/framework/test_group.js';\nimport {\n  kAllTextureFormats,\n  kCompressedTextureFormats,\n  kTextureFormatInfo } from\n'../../../../../format_info.js';\nimport { CompatibilityTest } from '../../../../compatibility_test.js';\n\nexport const g = makeTestGroup(CompatibilityTest);\n\ng.test('compressed').\ndesc(`Tests that you can not call copyTextureToTexture with compressed textures in compat mode.`).\nparams((u) => u.combine('format', kCompressedTextureFormats)).\nbeforeAllSubcases((t) => {\n  const { format } = t.params;\n  t.selectDeviceOrSkipTestCase([kTextureFormatInfo[format].feature]);\n}).\nfn((t) => {\n  const { format } = t.params;\n\n  const { blockWidth, blockHeight } = kTextureFormatInfo[format];\n\n  const srcTexture = t.createTextureTracked({\n    size: [blockWidth, blockHeight, 1],\n    format,\n    usage: GPUTextureUsage.COPY_SRC\n  });\n\n  const dstTexture = t.createTextureTracked({\n    size: [blockWidth, blockHeight, 1],\n    format,\n    usage: GPUTextureUsage.COPY_DST\n  });\n\n  const encoder = globalThis._TRAMPOLINE_(\"createCommandEncoder\", t.device, t.device.createCommandEncoder, [], () => t.device.createCommandEncoder());\n  encoder.copyTextureToTexture({ texture: srcTexture }, { texture: dstTexture }, [\n  blockWidth,\n  blockHeight,\n  1]\n  );\n  t.expectGPUErrorInCompatibilityMode('validation', () => {\n    encoder.finish();\n  });\n});\n\ng.test('multisample').\ndesc(`Test that you can not call copyTextureToTexture with multisample textures in compat mode.`).\nparams((u) =>\nu.\nbeginSubcases().\ncombine('format', kAllTextureFormats).\nfilter(({ format }) => {\n  const info = kTextureFormatInfo[format];\n  return info.multisample && !info.feature;\n})\n).\nfn((t) => {\n  const { format } = t.params;\n  const { blockWidth, blockHeight } = kTextureFormatInfo[format];\n\n  t.skipIfTextureFormatNotSupported(format);\n\n  const srcTexture = t.createTextureTracked({\n    size: [blockWidth, blockHeight, 1],\n    format,\n    sampleCount: 4,\n    usage: GPUTextureUsage.COPY_SRC | GPUTextureUsage.RENDER_ATTACHMENT\n  });\n\n  const dstTexture = t.createTextureTracked({\n    size: [blockWidth, blockHeight, 1],\n    format,\n    sampleCount: 4,\n    usage: GPUTextureUsage.COPY_DST | GPUTextureUsage.RENDER_ATTACHMENT\n  });\n\n  const encoder = globalThis._TRAMPOLINE_(\"createCommandEncoder\", t.device, t.device.createCommandEncoder, [], () => t.device.createCommandEncoder());\n  encoder.copyTextureToTexture({ texture: srcTexture }, { texture: dstTexture }, [\n  blockWidth,\n  blockHeight,\n  1]\n  );\n  t.expectGPUErrorInCompatibilityMode('validation', () => {\n    encoder.finish();\n  });\n});"],"mappings":"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","ignoreList":[]}