{"version":3,"file":"delay_get_texture.html.js","names":["timeout","takeScreenshotDelayed","assert","condition","msg","Error","navigator","gpu","undefined","adapter","globalThis","_TRAMPOLINE_","requestAdapter","device","requestDevice","canvas","document","getElementById","ctx","getContext","configure","format","getPreferredCanvasFormat","alphaMode","encoder","createCommandEncoder","pass","beginRenderPass","colorAttachments","view","getCurrentTexture","createView","clearValue","r","g","b","a","loadOp","storeOp","end","queue","submit","finish"],"sources":["../../../../src/webgpu/web_platform/reftests/delay_get_texture.html.ts"],"sourcesContent":["/**\n* AUTO-GENERATED - DO NOT EDIT. Source: https://github.com/gpuweb/cts\n**/import { timeout } from '../../../common/util/timeout.js';import { takeScreenshotDelayed } from '../../../common/util/wpt_reftest_wait.js';\nfunction assert(condition, msg) {\n  if (!condition) {\n    throw new Error(msg && (typeof msg === 'string' ? msg : msg()));\n  }\n}\n\nvoid (async () => {\n  assert(\n    typeof navigator !== 'undefined' && navigator.gpu !== undefined,\n    'No WebGPU implementation found'\n  );\n\n  const adapter = await globalThis._TRAMPOLINE_(\"requestAdapter\", navigator.gpu, navigator.gpu.requestAdapter, [], () => navigator.gpu.requestAdapter());\n  assert(adapter !== null);\n  const device = await globalThis._TRAMPOLINE_(\"requestDevice\", adapter, adapter.requestDevice, [], () => adapter.requestDevice());\n  assert(device !== null);\n\n  const canvas = document.getElementById('cvs0');\n  const ctx = canvas.getContext('webgpu');\n  ctx.configure({\n    device,\n    format: navigator.gpu.getPreferredCanvasFormat(),\n    alphaMode: 'premultiplied'\n  });\n\n  timeout(() => {\n    const encoder = globalThis._TRAMPOLINE_(\"createCommandEncoder\", device, device.createCommandEncoder, [], () => device.createCommandEncoder());\n    const pass = encoder.beginRenderPass({\n      colorAttachments: [\n      {\n        view: ctx.getCurrentTexture().createView(),\n        clearValue: { r: 0.0, g: 1.0, b: 0.0, a: 1.0 },\n        loadOp: 'clear',\n        storeOp: 'store'\n      }]\n\n    });\n    pass.end();\n    globalThis._TRAMPOLINE_(\"submit\", device, device.queue.submit, [[encoder.finish()]], () => device.queue.submit([encoder.finish()]));\n\n    takeScreenshotDelayed(50);\n  }, 100);\n})();"],"mappings":";;IAAA;AACA;AACA,GAAG,SAASA,OAAO,QAAQ,iCAAiC,CAAC,SAASC,qBAAqB,QAAQ,0CAA0C,CAC7I,SAASC,MAAMA,CAACC,SAAS,EAAEC,GAAG,EAAE,CAC9B,IAAI,CAACD,SAAS,EAAE;IACd,MAAM,IAAIE,KAAK,CAACD,GAAG,KAAK,OAAOA,GAAG,KAAK,QAAQ,GAAGA,GAAG,GAAGA,GAAG,CAAC,CAAC,CAAC,CAAC;EACjE;AACF;;AAEA,KAAK,CAAC,YAAY;EAChBF,MAAM;IACJ,OAAOI,SAAS,KAAK,WAAW,IAAIA,SAAS,CAACC,GAAG,KAAKC,SAAS;IAC/D;EACF,CAAC;;EAED,MAAMC,OAAO,GAAG,MAAMC,UAAU,CAACC,YAAY,CAAC,gBAAgB,EAAEL,SAAS,CAACC,GAAG,EAAED,SAAS,CAACC,GAAG,CAACK,cAAc,EAAE,EAAE,EAAE,MAAMN,SAAS,CAACC,GAAG,CAACK,cAAc,CAAC,CAAC,CAAC;EACtJV,MAAM,CAACO,OAAO,KAAK,IAAI,CAAC;EACxB,MAAMI,MAAM,GAAG,MAAMH,UAAU,CAACC,YAAY,CAAC,eAAe,EAAEF,OAAO,EAAEA,OAAO,CAACK,aAAa,EAAE,EAAE,EAAE,MAAAJ,UAAA,CAAAC,YAAA,kBAAMF,OAAO,EAAPA,OAAO,CAAAK,aAAA,YAAPL,OAAO,CAACK,aAAa,GAAE,CAAC;EAChIZ,MAAM,CAACW,MAAM,KAAK,IAAI,CAAC;;EAEvB,MAAME,MAAM,GAAGC,QAAQ,CAACC,cAAc,CAAC,MAAM,CAAC;EAC9C,MAAMC,GAAG,GAAGH,MAAM,CAACI,UAAU,CAAC,QAAQ,CAAC;EACvCD,GAAG,CAACE,SAAS,CAAC;IACZP,MAAM;IACNQ,MAAM,EAAEf,SAAS,CAACC,GAAG,CAACe,wBAAwB,CAAC,CAAC;IAChDC,SAAS,EAAE;EACb,CAAC,CAAC;;EAEFvB,OAAO,CAAC,MAAM;IACZ,MAAMwB,OAAO,GAAGd,UAAU,CAACC,YAAY,CAAC,sBAAsB,EAAEE,MAAM,EAAEA,MAAM,CAACY,oBAAoB,EAAE,EAAE,EAAE,MAAAf,UAAA,CAAAC,YAAA,yBAAME,MAAM,EAANA,MAAM,CAAAY,oBAAA,YAANZ,MAAM,CAACY,oBAAoB,GAAE,CAAC;IAC7I,MAAMC,IAAI,GAAGF,OAAO,CAACG,eAAe,CAAC;MACnCC,gBAAgB,EAAE;MAClB;QACEC,IAAI,EAAEX,GAAG,CAACY,iBAAiB,CAAC,CAAC,CAACC,UAAU,CAAC,CAAC;QAC1CC,UAAU,EAAE,EAAEC,CAAC,EAAE,GAAG,EAAEC,CAAC,EAAE,GAAG,EAAEC,CAAC,EAAE,GAAG,EAAEC,CAAC,EAAE,GAAG,CAAC,CAAC;QAC9CC,MAAM,EAAE,OAAO;QACfC,OAAO,EAAE;MACX,CAAC;;IAEH,CAAC,CAAC;IACFZ,IAAI,CAACa,GAAG,CAAC,CAAC;IACV7B,UAAU,CAACC,YAAY,CAAC,QAAQ,EAAEE,MAAM,EAAEA,MAAM,CAAC2B,KAAK,CAACC,MAAM,EAAE,CAAC,CAACjB,OAAO,CAACkB,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE,MAAAhC,UAAA,CAAAC,YAAA,WAAME,MAAM,EAANA,MAAM,CAAC2B,KAAK,CAAAC,MAAA,GAAQ,CAACjB,OAAO,CAACkB,MAAM,CAAC,CAAC,CAAC,SAAtC7B,MAAM,CAAC2B,KAAK,CAACC,MAAM,CAAC,CAACjB,OAAO,CAACkB,MAAM,CAAC,CAAC,CAAC,EAAC,CAAC;;IAEnIzC,qBAAqB,CAAC,EAAE,CAAC;EAC3B,CAAC,EAAE,GAAG,CAAC;AACT,CAAC,EAAE,CAAC","ignoreList":[]}