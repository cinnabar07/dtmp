{"version":3,"file":"worker_launcher.js","names":["SkipTestCase","getDefaultRequestAdapterOptions","launchDedicatedWorker","Worker","globalThis","constructor","name","selfPath","import","meta","url","selfPathDir","substring","lastIndexOf","workerPath","worker","type","promise","Promise","resolve","addEventListener","ev","data","once","postMessage","defaultRequestAdapterOptions","launchSharedWorker","SharedWorker","port","start","launchServiceWorker","navigator","serviceWorker","serviceWorkerPath","registration","register","update","unregister","active"],"sources":["../../../../src/webgpu/web_platform/worker/worker_launcher.ts"],"sourcesContent":["/**\n* AUTO-GENERATED - DO NOT EDIT. Source: https://github.com/gpuweb/cts\n**/import { SkipTestCase } from '../../../common/framework/fixture.js';import { getDefaultRequestAdapterOptions } from '../../../common/util/navigator_gpu.js';\n\n\n\n\nexport async function launchDedicatedWorker() {\n  if (typeof Worker === 'undefined') {\n    throw new SkipTestCase(`Worker undefined in context ${globalThis.constructor.name}`);\n  }\n\n  const selfPath = import.meta.url;\n  const selfPathDir = selfPath.substring(0, selfPath.lastIndexOf('/'));\n  const workerPath = selfPathDir + '/worker.js';\n  const worker = new Worker(workerPath, { type: 'module' });\n\n  const promise = new Promise((resolve) => {\n    worker.addEventListener('message', (ev) => resolve(ev.data), { once: true });\n  });\n  worker.postMessage({ defaultRequestAdapterOptions: getDefaultRequestAdapterOptions() });\n  return await promise;\n}\n\nexport async function launchSharedWorker() {\n  if (typeof SharedWorker === 'undefined') {\n    throw new SkipTestCase(`SharedWorker undefined in context ${globalThis.constructor.name}`);\n  }\n\n  const selfPath = import.meta.url;\n  const selfPathDir = selfPath.substring(0, selfPath.lastIndexOf('/'));\n  const workerPath = selfPathDir + '/worker.js';\n  const worker = new SharedWorker(workerPath, { type: 'module' });\n\n  const port = worker.port;\n  const promise = new Promise((resolve) => {\n    port.addEventListener('message', (ev) => resolve(ev.data), { once: true });\n  });\n  port.start();\n  port.postMessage({\n    defaultRequestAdapterOptions: getDefaultRequestAdapterOptions()\n  });\n  return await promise;\n}\n\nexport async function launchServiceWorker() {\n  if (typeof navigator === 'undefined' || typeof navigator.serviceWorker === 'undefined') {\n    throw new SkipTestCase(\n      `navigator.serviceWorker undefined in context ${globalThis.constructor.name}`\n    );\n  }\n\n  const selfPath = import.meta.url;\n  const selfPathDir = selfPath.substring(0, selfPath.lastIndexOf('/'));\n  const serviceWorkerPath = selfPathDir + '/worker.js';\n  const registration = await navigator.serviceWorker.register(serviceWorkerPath, {\n    type: 'module'\n  });\n  await registration.update();\n\n  const promise = new Promise((resolve) => {\n    navigator.serviceWorker.addEventListener(\n      'message',\n      (ev) => {\n        resolve(ev.data);\n        void registration.unregister();\n      },\n      { once: true }\n    );\n  });\n  registration.active?.postMessage({\n    defaultRequestAdapterOptions: getDefaultRequestAdapterOptions()\n  });\n  return await promise;\n}"],"mappings":"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","ignoreList":[]}